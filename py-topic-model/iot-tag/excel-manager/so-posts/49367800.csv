thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
49367800,49367800,null,1,0,Mon Mar 19 16:25:00 EDT 2018,9427710,"<p>I'm trying to receive notifications in the cloud back-end when Device twin properties change. To do this I have set up a route as seen in the picture link below</p>		<p><a href="https://imgur.com/a/uh0mV" rel="nofollow noreferrer">https://imgur.com/a/uh0mV</a></p>		<p>I have also created an Azure Function that triggers on the default consumer group for the built in end-point events. But when I update the device twin document for one of my device the azure functions does not trigger. And if I monitor the events for the device using iothubexplorer or Device explorer I see no "updateTwin" events at all. However it works if I send regular device-to-cloud from the device I receive those.</p>		<p>Im using the following code to update the device twin:</p>		<pre><code>'use strict';		var Client = require('azure-iot-device').Client;	var Protocol = require('azure-iot-device-mqtt').Mqtt;		var connectionString = '';	var client = Client.fromConnectionString(connectionString, Protocol);			client.open(function(err) {	if (err) {	    console.error('could not open IotHub client');	}  else {	    console.log('client opened');		    client.getTwin(function(err, twin) {	    if (err) {	        console.error('could not get twin');	    } else {	        var body = {	            temperature: '40'	        }		        console.log(twin.properties.reported);		        twin.properties.reported.update(body, function(err) {	            if (err) {	                console.error('could not update twin');	            } else {	                console.log('twin state reported');	                process.exit();	            }	        });	    }	    });	}	});	</code></pre>		<p>Ive also tried using iothub-explorer using the following command:	        iothub-explorer update-twin InitialDevice {\"properties\":{\"desired\":	    {\"interval\":9000}}} --login ""</p>	"
49367800,85744034,49367800,3,0,Mon Mar 19 20:08:00 EDT 2018,8084828,"for test purpose, you can use a Device Explorer (or Azure portal) for update a device twin desired properties to see a notification message in your Azure Function"
49367800,49375829,49367800,2,1,Tue Mar 20 03:18:00 EDT 2018,8546089,"<p>I tested with the code in your post, it works, so your Routes setup and code are correct.	<a href="https://i.stack.imgur.com/FkxFo.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/FkxFo.png" alt="enter image description here"></a>	<a href="https://i.stack.imgur.com/SB0Ms.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/SB0Ms.png" alt="enter image description here"></a></p>		<p>Have you referred to this <a href="https://stackoverflow.com/questions/46196423/how-to-implement-routes-functionality-for-twin-change-in-azure-iot-hub">topic</a>? I guess the problem is similar with that.Please try to check the account location and test with Roman Kiss's suggestion.</p>	"
49367800,85787138,49375829,3,0,Tue Mar 20 19:38:00 EDT 2018,9427710,"Thank you for your response Michael. After lots of attempts trying to get it to work I removed my IoT hub and created a new one on Europe West instead of Europe North, after that everything worked perfectly. Perhaps It was the location of the service, or some other setting that I had managed to activate. Anyways, it works now. Cheers."
