thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
29235049,29235049,null,1,2,Tue Mar 24 14:20:00 EDT 2015,1480482,"<p>I have been researching MQTT and I am curious how implementation works when trying to create a one-to-one communication system.</p>		<p><strong>What I am trying to do:</strong> Set up a system that allows a IOT device to push notifications directly to its user &amp; the user to push notifications to their IOT device via a MQTT broker.</p>		<p><strong>Thoughts on implementation:</strong> </p>		<ol>	<li>All devices have a separate topic that each user is subscribed to.</li>	<li>Each device publishes to the same topic with a tag that identifies the user to pass the message to.</li>	</ol>		<p>Below is an image I created of how I see the implementation working. 	<img src="https://i.stack.imgur.com/tCIzc.png" alt=""></p>		<p><strong>More Info:</strong> I need an system that can scale to include 100k+ devices, but extremely low amount of messages(1 message a day)</p>		<p><strong>Layout:</strong></p>		<ul>	<li>IOT device will send message via MQTT to the back end system.</li>	<li>Back-end system will receive the message and store it in the back	end.</li>	<li>Web-service(Dispatcher) layer which will communicate between the	back-end and mobile application.</li>	<li>Mobile application will communicate directly to IOT device via web	services.</li>	</ul>		<p><strong>Questions:</strong> </p>		<ul>	<li>How is the MQTT Broker implemented with regard to topics for one-to-one communication when large amounts of users are anticipated?</li>	<li>Is there a limit on topics?</li>	<li>What am I missing regarding the layout?</li>	</ul>	"
29235049,29235831,29235049,2,1,Tue Mar 24 14:55:00 EDT 2015,4607349,"<p>I think your concept of understanding MQTT (pub/sub messaging) is incorrect.  Every client subscribed to a particular topic gets message. The "tag" you have mentioned (<code>with a tag that identifies the user to pass the message to</code>) is the topic name where the message has to be published. </p>		<p>If you want to do some special message distribution you have to create a client who will be subscribed to a topic where each client sends a message to and then it dispatches the message to particular â€œclientâ€? topic based on value of your â€œtagâ€?.</p>	"
29235049,46685982,29235831,3,0,Tue Mar 24 18:12:00 EDT 2015,341750,"Putting part of what should be in the topic (what you call the tag) into the message breaks the orthogonality of MQTT and makes the whole system more complicated, fragile and thus breakable."
29235049,46704158,29235831,3,0,Wed Mar 25 07:42:00 EDT 2015,4607349,"My opinion is that the "tag" should be part of topic name."
29235049,46688596,29235831,3,0,Tue Mar 24 19:32:00 EDT 2015,1480482,"@hotpaw2 - So correct me if I am wrong, but your suggesting that there be a topic for each device then correct?"
29235049,46678180,29235831,3,0,Tue Mar 24 15:04:00 EDT 2015,1480482,"What I want is one-to-one communication when large amounts of users are anticipated. I am foggy on this implementation which is why I am here. My thought on the tag was this: All IOT device would publish to the same topic with a unique ID included in the message. A second-layer system would have to identify the tags query a DB, identify the endpoint associated with the message, pass the message along. I am not by any means confident on the implementation and looking for guidance on how the puzzle fits together on a higher level."
29235049,46678991,29235831,3,0,Tue Mar 24 15:21:00 EDT 2015,4607349,"What would be advantage of second-layer system, letâ€™s call it Dispatcher? Central point of all one to one associations?	What do you want to do with messages send to a client while it is off/down?	You would also need 3 kinds of clients â€“ each for one push system. And a protocol to inform Dispatcher when a client goes online and offline, to prevent sending messages when client is off."
29235049,46679720,29235831,3,0,Tue Mar 24 15:37:00 EDT 2015,1480482,"I was not thinking there was an advantage. I don't know how else it could be done. IOT device will send message via MQTT to the back end system. Back-end system will receive the message and store it in the back end. web-service(Dispatcher) layer which will communicate between the back-end and mobile application. Mobile application will  communicate directly to IOT device via web services."
29235049,46741346,29235831,3,0,Thu Mar 26 02:44:00 EDT 2015,341750,"A 2nd layer may be necessary for systems that can't keep a subscription connection alive automatically, relying instead on push notifications informing the user that they need to perform some action that eventually leads to a (re)connect and subscribe."
