thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
48786111,48786111,null,1,0,Wed Feb 14 11:28:00 EST 2018,3595639,"<p>I'm trying to create an Identity Translation Gateway as described in <a href="https://docs.microsoft.com/en-us/azure/iot-edge/iot-edge-as-gateway" rel="nofollow noreferrer">here</a>.</p>		<p>I have also read lot of Microsoft Documentation about their IoT solution.</p>		<p>I have : </p>		<ol>	<li>leaf devices (A) connected to my gateway by a custom protocol without direct connection to the hub. </li>	<li>gateway devices (B) acting as a IoT Edge device connected to A and to the	IoT Hub.</li>	<li>My IoT Hub.</li>	</ol>		<p>As far as I understand:</p>		<ul>	<li>my IoT Edge has to register each device on the IoT Hub this way each	A device will be represented on my hub and we will be able to send	message via its ID directly.</li>	<li>I can send message and listen them on my gateway via the route	/devices/{deviceId}/messages</li>	</ul>		<p>For the example let's say I have:</p>		<ul>	<li>an IoTEdge device with Id : "Edge1"</li>	<li>an IoTEdge device with Id : "Edge2"</li>	<li>a device with Id : "DeviceA" connected to "Edge1"</li>	<li>a device with Id : "DeviceB" connected to "Edge2"</li>	</ul>		<p>What I don't understand since there is no connection between hub and leaf devices is how, when i'll send a message to "DeviceA" with "<em>/devices/DeviceA/messages</em>", the hub will know which gateway address and how to listen it from my gateway. Doing the (un)multiplexing process, in short</p>		<ul>	<li>Is there a way to handle it automatically with IoT Hub that I don't see ? The GatewayHostName inside the connection-string does the trick ? </li>	<li>Must I handle it manualy, sending all my messages to my gateways ID instead (i.e devices/Edge1/messages) and sending the final targetted device ID inside my message body ? If yes, i don't understand the benefit of registering each device on the HuB</li>	<li>Must I listen each connected device route inside my gateway (i.e	/devices/DeviceA/messages for Edge1) ?</li>	</ul>		<p>thanks for helping.</p>	"
48786111,48813904,48786111,2,1,Thu Feb 15 18:20:00 EST 2018,9366463,"<p>Based on what I understand about your scenario, you are trying to send a message from the cloud to a module running on the Edge device and then have the module send the message to the downstream device. C2D (cloud to device) messages are not supported for Edge devices and modules. You can use C2D methods provided by the ServiceClient in the following package  <a href="https://www.nuget.org/packages/Microsoft.Azure.Devices/1.16.0-preview-001" rel="nofollow noreferrer">https://www.nuget.org/packages/Microsoft.Azure.Devices/1.16.0-preview-001</a> and call a method on the module. The module can then pass on relevant data to its downstream device.</p>	"
48786111,84732072,48813904,3,0,Mon Feb 19 10:49:00 EST 2018,3595639,"So, if I understand, i will code a method on my edge device's module passing data to its downstream service, invoked by the server with ServiceClient.InvokeDeviceMethodAsync(...) ? :D"
48786111,84788018,48813904,3,0,Tue Feb 20 17:51:00 EST 2018,9366463,"Please clarify the meaning of downstream service and server in your message. I think you summarized it correctly, but I want to make sure."
