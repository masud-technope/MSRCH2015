thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
27052717,27052717,null,1,0,Fri Nov 21 01:28:00 EST 2014,2490660,"<p>I have an embedded device that can be controlled by JSON over UDP. I am currently performing this via an iOS App, and everything works great.</p>		<p>I am now wanting to be able to also control my device from a remote location. And am wanting to use Azure to perform this task. I envision that I will set up an Azure Website which will enable me to select options which then send the JSON to my device, which is behind a firewall.</p>		<p>My question is which of the Azure Services should I be looking into? Also, what is the best way to get the JSON packet to the device behind the firewall (I do not want to use port forwarding).</p>	"
27052717,27056725,27052717,2,2,Fri Nov 21 08:09:00 EST 2014,2210944,"<p>In general, to avoid an attack surface from outside your LAN (where you have your embedded device), the better solution is to open and output connection from embedded device to the cloud and to leave it open so that it can send and receive data/command.	In this case, on Azure you can use the Service Bus (queue, topic/subscription or event hub) to send/receive with AMQP protocol but it is strictly related to your device and capabilities.	Can you share more information on it ? How much it is a constrained device or a more power device with an high level OS (Linux, Windows, ...) ?</p>		<p>Paolo Patierno</p>	"
27052717,42641593,27056725,3,0,Fri Nov 21 14:42:00 EST 2014,2490660,"Thanks, so I am assuming in this solution, my device would poll the service bus to see whether there is any new data to consume? Which would be the best Service Bus option to use; Queue, Topic or Event? Also, my device uses/consumes JSON to enable its control, so which protocol would be best to use with JSON data?"
27052717,42641787,27056725,3,0,Fri Nov 21 14:47:00 EST 2014,2210944,"If you use MQTT you haven't to poll...MQTT protocol is publish/subscribe. When a device subscribes to a topic (not related with Service Bus topic :-)) it receives any message published by another client on the same topic. You could not use Service Bus but an MQTT broker in Azure (in a VM for example) and the iOS app could connect to it for publishing messages to send to the device. Or you could implement an MQTT to Service Bus bridge ... the are a lot of solution. Regarding JSON it's only a way to represent data and it's not related to the protocol that transport it."
27052717,42643751,27056725,3,0,Fri Nov 21 15:43:00 EST 2014,2490660,"Thanks, I am trying to use a pure Azure services example, rather than a VM. You mention MQTT to Service Bus bridge. I have not seen the Service Bus bridge option in Azure."
27052717,42705003,27056725,3,0,Mon Nov 24 08:12:00 EST 2014,2210944,"In this case you can connect to Service Bus. Possibile solutions are to use HTTP(S) REST APIs (http://msdn.microsoft.com/en-us/library/azure/hh780717.aspx) or AMQP(S). In the last case you can try to use the Qpid Proton C library (http://qpid.apache.org/proton/). However, consider that MQTT is more lightweight than AMQP."
27052717,42638733,27056725,3,0,Fri Nov 21 13:19:00 EST 2014,2210944,"In this case I think that the best solution could be MQTT and develop a bridge in the cloud to Service Bus. AMQP is more complex than MQTT and not lightweight as MQTT. However, the usage depends on the application."
27052717,42629385,27056725,3,0,Fri Nov 21 08:24:00 EST 2014,2490660,"The device is running an RTOS and is developed in C, but it does have a TCP/IP stack with UCP and TCP, which can be used to create HTTP packets or other packets. You can obtain the MAC Address also, and it is advertising its self with MDNS on the local network.  It is the Texas Instruments CC3200 MCU. How complex is the AMQP protocol, can you easily create it with strings built on top of TCP or UDP?"
27052717,42928278,27056725,3,0,Mon Dec 01 09:25:00 EST 2014,2490660,"Thanks, I will look into it. Do you think I will be able to successfully get Qpid to work on a small embedded device? 80Mhz, 256KB Shared RAM (Will need to fit both RAM requirements and Program Code into 256KB [Code loads from serial flash into RAM]). I would only need Telemetry at first, so perhaps Qpid code could be reduced or perhaps much of it does not get linked unless you need it."
27052717,42929776,27056725,3,0,Mon Dec 01 10:11:00 EST 2014,2490660,"Also, my device has a TCP/IP Stack and Sockets (UDP & TCP) and also supports SSL/TLS."
27052717,42645516,27056725,3,0,Fri Nov 21 16:33:00 EST 2014,2210944,"The bridge is a feature you have to develop. You can interact with Service Bus only using HTTP(S) protocol or AMQP(S). Remember that Service Bus needs SSL for both HTTP and AMQP. I don't know how much your device is constrained and you can add SSL stack on it."
27052717,42645775,27056725,3,0,Fri Nov 21 16:42:00 EST 2014,2490660,"The device supports SSL/TLS in client mode"
27052717,42908148,27056725,3,0,Sun Nov 30 13:54:00 EST 2014,2490660,"Thanks for the pointer to Qpid. An AMQP client on the device sounds like the best solution...no need for a broker. Would need to see if this could be implemented on my device. Hopefully in future MS will also implement MQTT on the Service Bus, small devices require small protocols."
27052717,42926735,27056725,3,0,Mon Dec 01 08:27:00 EST 2014,2210944,"There is a project name "Reykjavik" showed at Build 2014 that provides a device gateway in the Cloud based on Service Bus. It will provide support for MQTT protocol."
27052717,42931212,27056725,3,1,Mon Dec 01 10:57:00 EST 2014,2210944,"Until now I used QPid on a device based on Linux so with power for running a full OS. I think that your problem could be explained by following : http://qpid.2158936.n2.nabble.com/Proton-Embedded-Proposal-td7616143.html"
27052717,42933224,27056725,3,0,Mon Dec 01 12:02:00 EST 2014,2490660,"Ok thanks....it is nice to see this is being looked into by other also!"
27052717,34887163,27052717,2,0,Tue Jan 19 21:22:00 EST 2016,2197648,"<p>About using Amqp on devices running android is very tedious. The java implementation in dalvik is missing a lot of required apis to be there.</p>		<p>By the way, do you know where we can find information about related path segments to use in amqp pure syntax in Azure, to interact with IoT-Hub end-points. Like for queue for example, we can have : </p>		<blockquote>	  <p>amqps://:@.servicebus.windows.net/ </p>	</blockquote>		<p>Thanks</p>	"
