thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
35235677,35235677,null,1,1,Sat Feb 06 00:16:00 EST 2016,5844047,"<p>I have built a simple application which connects to my IoT temp sensor device and sends an email based on the temp--warm, just right, and cold.  To do this I've used the IBM IoT node for connecting to my IoT device, and then processed the data with case statements to fall into the three buckets: warm, just right, and cold.  From there I generate an email and send the temp category to my email address.</p>		<p>However, my temp sensor is measuring and sending data every 1 second so my app is sending an email every 1 second--which is too often.  Instead I'd like to only send an email when there is a transition between the three temperature states.  Naturally, I'd like to implement this with a state machine or the case statement processing block.  This requires that I have both data points: the current temp measurement and the last recorded measurement.  What is the best way to go about storing the last recorded temp measurement and are there any tips on the node flow I should use?</p>		<p><a href="http://i.stack.imgur.com/IQhJz.png" rel="nofollow">Email IoT Application Nodes</a></p>	"
35235677,58274011,35235677,3,0,Mon Feb 08 23:26:00 EST 2016,4454969,"Looks like you are using Node-RED for your app. Can you export the code?:"
35235677,58362809,35235677,3,0,Wed Feb 10 22:19:00 EST 2016,4454969,"I would think perhaps you need to feed the readings to a database such as Cloudant and then write logic to only send the emails when you cross from one threshold to another.  Or, you may want to check out some of the flows at http://flows.nodered.org/ to see if any of those examples help you."
35235677,58202208,35235677,3,0,Sat Feb 06 17:34:00 EST 2016,1501285,"Any code to share?"
35235677,35679411,35235677,2,1,Sun Feb 28 06:13:00 EST 2016,1738915,"<p>If we have a look at this article:</p>		<p><a href="http://noderedguide.com/index.php/2015/11/06/node-red-lecture-5-the-node-red-programming-model/" rel="nofollow">http://noderedguide.com/index.php/2015/11/06/node-red-lecture-5-the-node-red-programming-model/</a></p>		<p>We find a section called "context".  This allows us to maintain state data between instances of a message flow either globally or just locally to a particular node.  What that means is that a value received at an earlier time can be saved and compared against the current value.  You have to use the JavaScript language in a <code>Function</code> node but I am hoping that isn't too complicated and there are lots of examples around.</p>	"
35235677,35680446,35235677,2,1,Sun Feb 28 08:44:00 EST 2016,504554,"<p>The is a <strong>report by exception</strong> (rbe) node in the default pallet that will do this for you.</p>		<p>It only allows messages to pass if their <code>msg.payload</code> field is different from the last message.</p>		<p>A flow would look something like this:</p>		<p><a href="https://i.stack.imgur.com/bmoPg.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/bmoPg.png" alt="Node-RED flow"></a></p>		<p>I've used a MQTT input instead of a IoTf node, but it's near enough the same.</p>		<p>The function node set's the email body (msg.payload) and the <strong>rbe</strong> node will deal with the only sending once per change.</p>		<p>One thing to note is that the <strong>rbe</strong> node filters on a per topic basis so all the messages same topic, but the <strong>email-out</strong> node uses the topic to set the email subject.</p>	"
35235677,62372877,35680446,3,0,Wed May 25 10:51:00 EDT 2016,2318649,"One thing I found strange about rbe is that the msg.payload has to be a simple string or integer value, can't be a javascript object."
35235677,62378382,35680446,3,0,Wed May 25 12:58:00 EDT 2016,2318649,":-) the surprise was that the docs weren't slightly more explicit"
35235677,62376827,35680446,3,0,Wed May 25 12:27:00 EDT 2016,504554,"@barny if you can come up with an efficient way to compare two JSON objects I'm sure the Node-RED project would accept a patch."
35235677,37436576,35235677,2,0,Wed May 25 12:04:00 EDT 2016,2318649,"<p>As well as rbe you can use a delay node (third in the Function palette) to rate limit to e.g 5 messages a minute (programmable number and period), with a choice of whether to discard the excess messages. Presumably you might not discard when messages arrive in short bursts with long gaps between bursts.</p>	"
