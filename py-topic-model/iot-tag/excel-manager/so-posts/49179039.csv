thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
49179039,49179039,null,1,0,Thu Mar 08 17:25:00 EST 2018,1930814,"<p>I am following the steps to register a device in AWS-IoT. I am doing the steps described <a href="https://aws.amazon.com/premiumsupport/knowledge-center/iot-self-signed-certificates/" rel="nofollow noreferrer">by AWS to use a self-signed certificate</a>. The step three of the tutorial indicates the following command:</p>		<pre><code>aws iot get-registration-code	</code></pre>		<p>But I am getting the following exception:</p>		<blockquote>	  <p>$ aws iot get-registration-code</p>	  	  <p>An error occurred (AccessDeniedException) when calling the	  GetRegistrationCode operation: User: arn:aws:iam::xxxxxxxx:user/dalton	  is not authorized to perform: iot:GetRegistrationCode on resource: *</p>	</blockquote>		<p>It is not clear how I can assign the right permissions. At IAM Management Console, I assigned the following permissions to my user:</p>		<blockquote>	  <p>AWSIoTThingsRegistration</p>	  	  <p>AWSIoTLogging</p>	  	  <p>AWSIoTConfigAccess</p>	  	  <p>AWSIoTRuleActions</p>	  	  <p>AWSIoTConfigReadOnlyAccess</p>	  	  <p>AWSQuickSightIoTAnalyticsAccess</p>	  	  <p>AWSIoTOTAUpdate</p>	  	  <p>AWSIoTDataAccess</p>	  	  <p>AWSIoTFullAccess</p>	</blockquote>		<p>Still without success.</p>	"
49179039,49209107,49179039,2,2,Sat Mar 10 12:32:00 EST 2018,492410,"<p>AWSIoTFullAccess defines this policy :</p>		<pre><code>{	    "Version": "2012-10-17",	    "Statement": [	        {	            "Effect": "Allow",	            "Action": [	                "iot:*"	            ],	            "Resource": "*"	        }	    ]	}	</code></pre>		<p>So with that you will be able to execute the call according to the <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iam-policies.html" rel="nofollow noreferrer">IAM IoT policies</a>. When attaching a new policy it only take a few seconds before it goes into effect on the CLI.</p>		<p>You need to :</p>		<ul>	<li>Double check your IAM policies and ensure that the user that is using the CLI uses indeed uses the aws credentials (key and secret) that matches the IAM user that has the AWSIoTFullAccess. </li>	<li>Double check the AWS account number if you're using multiple accounts. </li>	<li>Run the <a href="https://policysim.aws.amazon.com/home/index.jsp#users/testuser2/AWSIoTFullAccess" rel="nofollow noreferrer">AWS IAM Policy Simulator</a> and verify the output. </li>	</ul>		<p><a href="https://i.stack.imgur.com/Wq40M.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/Wq40M.png" alt="enter image description here"></a></p>	"
49179039,85518714,49209107,3,0,Tue Mar 13 13:47:00 EDT 2018,1930814,"I used the `aws configure`. I am studying the AWS IoT flow, but I think the documentation leaves some lacks, topics that could be better explained..."
49179039,85478518,49209107,3,0,Mon Mar 12 14:26:00 EDT 2018,1930814,"It is strange, but the problem disappeared after rebooting the system. Now I get the registration code. No modification in IAM system was needed."
49179039,85502922,49209107,3,0,Tue Mar 13 06:41:00 EDT 2018,492410,"how do you load your aws credentials ? (via credentials file, via environment props ?) Possible that your shell had stale / other credentials when you were executing the cli cmd ?"
