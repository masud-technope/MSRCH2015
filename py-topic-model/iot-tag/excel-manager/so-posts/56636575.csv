thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
56636575,56636575,null,1,0,Mon Jun 17 17:58:00 EDT 2019,9996098,"<p>I've been unable to get my mongodb2 node to store photo data, since the JSON node seems unable to parse the msg.payload objects. I'm not certain where to invoke JSON.parse() directly on the msg objects, or if that's the right thing to do</p>		<p>I've explored a bit about this, but am struggling to find an applicable answer. </p>		<p>I've looked at:	<a href="https://groups.google.com/forum/#!topic/node-red/0OZcvERZ_8I" rel="nofollow noreferrer">https://groups.google.com/forum/#!topic/node-red/0OZcvERZ_8I</a></p>		<p><a href="https://stackoverflow.com/questions/50864156/typeerror-cannot-create-property-id-on-string">TypeError: Cannot create property &#39;_id&#39; on string</a></p>		<p><a href="https://stackoverflow.com/questions/43440122/mongodb-error-cannot-create-property-id-on-string/43440444">MongoDB Error: Cannot create property &#39;_id&#39; on string</a></p>		<p><a href="https://stackoverflow.com/questions/43764172/typeerror-cannot-create-property-id-on-string-object-object">TypeError: Cannot create property &#39;_id&#39; on string &#39;{&quot;[object Object]&quot;:&quot;&quot;}&#39;</a></p>		<p>I've tried use JSON.parse on the msg.payload, but that seemes redundant and I get a <code>SyntaxError: Unexpected token / in JSON at position 0</code> error.</p>		<p>The original error is <code>TypeError: Cannot create property '_id' on string '{"type":"photo","content":"/home/pi/Pictures/photo0.JPEG"}'</code></p>		<p>Here is my modified flow:</p>		<p><code>[{"id":"76748518.aa6a6c","type":"tab","label":"Flow 3","disabled":false,"info":""},{"id":"604458.d3ad0ba8","type":"camerapi-takephoto","z":"76748518.aa6a6c","filemode":"1","filename":"photo0.JPEG","filedefpath":"0","filepath":"/home/pi/Pictures/","fileformat":"jpeg","resolution":"2","rotation":"0","fliph":"0","flipv":"0","brightness":"50","contrast":"0","sharpness":"0","quality":"80","imageeffect":"none","exposuremode":"auto","iso":"0","agcwait":"1.0","led":"0","awb":"auto","name":"","x":340,"y":260,"wires":[["52e79c7a.b67434","2ba7da54.f38006"]]},{"id":"3cbda3b.137155c","type":"inject","z":"76748518.aa6a6c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":200,"wires":[["604458.d3ad0ba8"]]},{"id":"f559bd59.c0ea3","type":"telegram sender","z":"76748518.aa6a6c","name":"","bot":"7e73adde.a70ef4","x":630,"y":380,"wires":[[]]},{"id":"52e79c7a.b67434","type":"function","z":"76748518.aa6a6c","name":"","func":"msg.payload={};\nmsg.payload.chatId=862276680;\nmsg.payload.type=\"photo\";\nmsg.payload.caption=\"Here's the caption\";\nmsg.payload.content= \"/home/pi/Pictures/photo0.JPEG\";\n//msg.payload.type=\"message\";\n//msg.payload.content=\"hello from node-red!\";\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":380,"wires":[["f559bd59.c0ea3"]]},{"id":"2ba7da54.f38006","type":"function","z":"76748518.aa6a6c","name":"","func":"msg.payload=JSON.parse(msg.payload);\n//msg.payload.chatId=862276680;\nmsg.payload.type=\"photo\";\n//msg.payload.caption=\"Here's the caption\";\nmsg.payload.content= \"/home/pi/Pictures/photo0.JPEG\";\n//msg.payload.type=\"message\";\n//msg.payload.content=\"hello from node-red!\";\nreturn msg;","outputs":1,"noerr":0,"x":170,"y":400,"wires":[["58ce8238.e9afdc","12fd6528.5ed4ab"]]},{"id":"58ce8238.e9afdc","type":"debug","z":"76748518.aa6a6c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":540,"y":460,"wires":[]},{"id":"92ebb1ff.b6775","type":"mongodb2 in","z":"76748518.aa6a6c","service":"_ext_","configNode":"e457b3d4.0a36e","name":"","collection":"CameraPhotos","operation":"insertOne","x":480,"y":620,"wires":[["d063a990.254128"]]},{"id":"12fd6528.5ed4ab","type":"json","z":"76748518.aa6a6c","name":"","property":"payload","action":"obj","pretty":false,"x":280,"y":560,"wires":[["92ebb1ff.b6775"]]},{"id":"d063a990.254128","type":"debug","z":"76748518.aa6a6c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":690,"y":560,"wires":[]},{"id":"7e73adde.a70ef4","type":"telegram bot","z":"","botname":"Kogamibot","usernames":"","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"12","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"verboselogging":true},{"id":"e457b3d4.0a36e","type":"mongodb2","z":"","uri":"mongodb://localhost:27017/local","name":"db","options":"","parallelism":"-1"}]</code></p>		<p>And here is my original flow:</p>		<p><code>[{"id":"604458.d3ad0ba8","type":"camerapi-takephoto","z":"76748518.aa6a6c","filemode":"1","filename":"photo0.JPEG","filedefpath":"0","filepath":"/home/pi/Pictures/","fileformat":"jpeg","resolution":"2","rotation":"0","fliph":"0","flipv":"0","brightness":"50","contrast":"0","sharpness":"0","quality":"80","imageeffect":"none","exposuremode":"auto","iso":"0","agcwait":"1.0","led":"0","awb":"auto","name":"","x":340,"y":260,"wires":[["52e79c7a.b67434","2ba7da54.f38006"]]},{"id":"3cbda3b.137155c","type":"inject","z":"76748518.aa6a6c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":200,"wires":[["604458.d3ad0ba8"]]},{"id":"f559bd59.c0ea3","type":"telegram sender","z":"76748518.aa6a6c","name":"","bot":"7e73adde.a70ef4","x":630,"y":380,"wires":[[]]},{"id":"52e79c7a.b67434","type":"function","z":"76748518.aa6a6c","name":"","func":"msg.payload={};\nmsg.payload.chatId=862276680;\nmsg.payload.type=\"photo\";\nmsg.payload.caption=\"Here's the caption\";\nmsg.payload.content= \"/home/pi/Pictures/photo0.JPEG\";\n//msg.payload.type=\"message\";\n//msg.payload.content=\"hello from node-red!\";\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":380,"wires":[["f559bd59.c0ea3"]]},{"id":"2ba7da54.f38006","type":"function","z":"76748518.aa6a6c","name":"","func":"msg.payload=msg.payload;\n//msg.payload.chatId=862276680;\nmsg.payload.type=\"photo\";\n//msg.payload.caption=\"Here's the caption\";\nmsg.payload.content= \"/home/pi/Pictures/photo0.JPEG\";\n//msg.payload.type=\"message\";\n//msg.payload.content=\"hello from node-red!\";\nreturn msg;","outputs":1,"noerr":0,"x":170,"y":400,"wires":[["58ce8238.e9afdc","12fd6528.5ed4ab"]]},{"id":"58ce8238.e9afdc","type":"debug","z":"76748518.aa6a6c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":540,"y":460,"wires":[]},{"id":"92ebb1ff.b6775","type":"mongodb2 in","z":"76748518.aa6a6c","service":"_ext_","configNode":"e457b3d4.0a36e","name":"","collection":"CameraPhotos","operation":"insertOne","x":480,"y":620,"wires":[["d063a990.254128"]]},{"id":"12fd6528.5ed4ab","type":"json","z":"76748518.aa6a6c","name":"","property":"payload","action":"obj","pretty":false,"x":280,"y":560,"wires":[["92ebb1ff.b6775"]]},{"id":"d063a990.254128","type":"debug","z":"76748518.aa6a6c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":690,"y":560,"wires":[]},{"id":"7e73adde.a70ef4","type":"telegram bot","z":"","botname":"Kogamibot","usernames":"","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"12","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"verboselogging":true},{"id":"e457b3d4.0a36e","type":"mongodb2","z":"","uri":"mongodb://localhost:27017/local","name":"db","options":"","parallelism":"-1"}]</code></p>	"
