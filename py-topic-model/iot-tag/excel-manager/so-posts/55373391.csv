thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
55373391,55373391,null,1,1,Wed Mar 27 09:09:00 EDT 2019,10206540,"<p>I am trying to provision my device into Azure IoT using Azure IoT Device Provisioning Service in which I am using the custom allocation policy, under manage enrollment group.</p>		<p>When the device registers to DPS (device provisioning service), it triggers an Azure Function in which I will decide which IoT Hub the device will be assigned to.</p>		<p>In my function, I have to take this decision based on some custom payload which I need to send from the device at the time of registering itself to DPS.</p>		<p>How will I send that custom payload from the device to the DPS at the time of registering itself, so I can get that payload in my Azure Function and can take a decision?</p>		<p>I am using Java as a programming language for the same.</p>	"
55373391,97499046,55373391,3,0,Thu Mar 28 00:57:00 EDT 2019,9401038,"Did you try using custom allocation policies? See [here](https://docs.microsoft.com/en-us/azure/iot-dps/how-to-use-custom-allocation-policies) as a reference - on that doc it explains how to provision a device to a specific IoTHub based on it's registration ID suffixes."
55373391,97541422,55373391,3,0,Fri Mar 29 05:05:00 EDT 2019,10206540,"Thanks @sergaz for replying, I tried that custom allocation policy, but my question is I have to provision a device to a specific IoT hub based on some other keys that should be my keys like customerId, customerName, etc. it's not registration ID. So is there any way that I can send my custom payload to DPS while registering my device?"
55373391,55419609,55373391,2,1,Fri Mar 29 14:28:00 EDT 2019,1051634,"<p>If you are using X.509 based authentication, your Azure Function is getting the actual certificate as part of the request (in the <code>clientCertificate</code> field).</p>		<p>Therefore, you may want to use custom fields in your certificate that you can read in your function, and then allocate your IoT Hub of choice based on their contents.</p>		<p>Another option, and probably more elegant as having custom fields in your certificate might expose information that'd better remain private, would be to maintain the mappings between the registrationId, customerId, customerId, etc. in a separate store, which you can query in your Azure Function.</p>	"
55373391,97618076,55419609,3,1,Mon Apr 01 09:42:00 EDT 2019,10206540,"Hey, I tried this solution, I have added custom fields in the certificate and I got those fields in azure function, through this I am able to achieve my requirements. Thanks again for the great and quick solution. :)"
55373391,97613116,55419609,3,0,Mon Apr 01 06:45:00 EDT 2019,10206540,"Thanks for replying, I have to try that custom fields in certificate option, so will update my doubts or answer shortly."
