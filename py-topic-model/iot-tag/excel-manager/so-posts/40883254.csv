thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
40883254,40883254,null,1,1,Wed Nov 30 08:11:00 EST 2016,161885,"<p>I have build a test application for some demo purposes which is based on IoT and Industry 4.0 concept. Following are important points.</p>		<ol>	<li>I have build a background application on Windows IoT (on Raspberry	Pi 3) to collect sensors data and push to MS Azure cloud. There	could be many simultaneous IoT devices.</li>	<li>On Azure side IoT Hub receives device to cloud messages.</li>	<li>Then Data is passed to stream analytics job which passes on the data to Event hub.</li>	<li>Event hub has 2 consumer groups in my configuration, which both are used by Azure web app.</li>	<li>Default Consumer group is used by WebJob to store historical data, while Custom consumer group named as Consumer group 1 in image is used by MVC 5 app.</li>	<li>MVC 5 app uses <code>SignalR</code> to pass on data to connected user to update dashboard.</li>	<li>For demo purpose this scenario seems to be working fine, where we have 5 or 10 simultaneous connection to cloud webapp.</li>	</ol>		<p>Following is the Architecture diagram of setup</p>		<p><a href="https://i.stack.imgur.com/1GWmQ.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/1GWmQ.png" alt="IoT solution Architecture diagram"></a></p>		<p><strong>Problem</strong></p>		<p>Now for real scenarios there could be many simultaneous users to cloud application and there is the point when cloud comes into play, and it can horizontally scale-up the webapp to many instances, It could create problem while directly reading events from Event Hub in that case and not all web-app instances will receive all events <strong>Which is wrong</strong>, and I think this is the reason in <a href="https://docs.microsoft.com/en-us/azure/iot-suite/iot-suite-remote-monitoring-sample-walkthrough" rel="nofollow noreferrer">MS Azure remote monitoring Architecture diagram</a>, that webapp is not reading messages from Event Hub directly.</p>		<p><strong>Question</strong></p>		<p>What could be best/qucik changes to above architecture to resolve the problem and still show realtime events to clients?</p>	"
40883254,69028872,40883254,3,0,Thu Dec 01 10:30:00 EST 2016,161885,"@RitaHan-MSFT The only question in my mind is can I achieve the real time event passing to Web GUI? as currently it is all handled by Event Hub, and whenever a new event is there it is directly passed to GUI, In `Logical architecture` it is being stored in Blob, not directly passed to GUI. I need to update GUI as soon as there is a new event."
40883254,69024182,40883254,3,0,Thu Dec 01 08:29:00 EST 2016,6601582,"What's the problem when using [Logical architecture](https://docs.microsoft.com/en-us/azure/iot-suite/iot-suite-remote-monitoring-sample-walkthrough#logical-architecture) that with Azure Storage(Blob) in it?"
40883254,69022523,40883254,3,1,Thu Dec 01 07:30:00 EST 2016,932728,"@CSharpRocks lol, you just provided the link he already included."
40883254,40929048,40883254,2,1,Fri Dec 02 09:44:00 EST 2016,6601582,"<p>Reading event data directly from event hub is limited by these <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-quotas" rel="nofollow noreferrer">quotas and limits</a>. </p>		<p>Maximum number of partitions per Event Hub is 32.</p>		<p>Note that a single partition within a consumer group cannot have more than 5 concurrent readers connected at any time.</p>		<p>So, for example, if you have one event hub, there are 32*5 concurrent readers supported at most.</p>		<p>If you have many more simultaneous users(>32*5) you need increase the number of event hub.  </p>		<blockquote>	  <p>It could create problem while directly reading events from Event Hub	  in that case and not all web-app instances will receive all events...</p>	</blockquote>		<p>There some possible reasons:</p>		<ol>	<li>If one or more readers disconnect due to <a href="https://blogs.msdn.microsoft.com/gyan/2014/09/02/event-hubs-receiver-epoch/" rel="nofollow noreferrer">Epoch</a> setting.</li>	<li><a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-overview#event-publisher" rel="nofollow noreferrer">If you don't specify a partition key when publishing an event, a round robin assignment is used</a>. Then receive from a specified partition will lose other partitions' event data. </li>	</ol>		<p>I test the scenario that five simultaneous readers receive event from one partition. No events loss.</p>		<p>Hope this is helpful for you. If there is any concern, please feel free to let me know.</p>	"
40883254,69441105,40929048,3,0,Tue Dec 13 10:22:00 EST 2016,161885,"Thanks for explanation. I don't specify a partition key. because Event hub is set as output of Stream Analytics Job. and I thinks events are distributed among partitions in RR fashion. For reading I am using `EventProcessorHost`. Moreover a web-app can have 20 parallel instances (Scale-up), and each will have its own EventProcessorHost, so in that case some of web-app instances may miss messages?, because EventProcessorHost will keeping its offsets globally in cloud storage. Can I make it working with EventProcessorHost?"
