thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
37406894,37406894,null,1,1,Tue May 24 07:22:00 EDT 2016,2108128,"<p>I am trying to use eclipse paho library for the android app designed for my IoT project. Android app is simply sending gyroscope and accelerometer data to the broker at iot.eclipse.org. 	I use the following code to establish a connection with the MQTT Server. 	 `public void establishMQTTConnection(){</p>		<pre><code>    clientId = MqttClient.generateClientId();	    Log.d(TAG,clientId+"");	    client =	            new MqttAndroidClient(this.getApplicationContext(),  "iot.eclipse.org:1883",	                    clientId);		   // MqttConnectOptions options = new MqttConnectOptions();	    //options.setUserName("aiupvrxz");	    //options.setPassword("dOW0vFQzRGKA".toCharArray());	    try {		        token = client.connect();	        token.setActionCallback(new IMqttActionListener() {	            @Override	            public void onSuccess(IMqttToken asyncActionToken) {	                // We are connected	                Log.d(TAG, "onSuccess");	            }		            @Override	            public void onFailure(IMqttToken asyncActionToken, Throwable exception) {	                // Something went wrong e.g. connection timeout or firewall problems	                Log.d(TAG, "onFailure");		            }	        });	    } catch (MqttException e) {	        e.printStackTrace();	    }	}` 	</code></pre>		<p>Problem is app never establishes the connection. 	I get the following error in the logcat. </p>		<pre><code>05-24 12:48:20.772 10236-10236/iot.dulanga.com.androidclientv2 E/AndroidRuntime: FATAL EXCEPTION: main	java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000010 (has extras) } in org.eclipse.paho.android.service.MqttService$NetworkConnectionIntentReceiver@41fc9348	   at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:737)	   at android.os.Handler.handleCallback(Handler.java:605)	   at android.os.Handler.dispatchMessage(Handler.java:92)	   at android.os.Looper.loop(Looper.java:137)	   at android.app.ActivityThread.main(ActivityThread.java:4573)	   at java.lang.reflect.Method.invokeNative(Native Method)	   at java.lang.reflect.Method.invoke(Method.java:511)	android.permission.WAKE_LOCK	   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)	   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)	   at dalvik.system.NativeStart.main(Native Method)	Caused by: java.lang.SecurityException: Neither user 10121 nor current process has android.permission.WAKE_LOCK.	   at android.os.Parcel.readException(Parcel.java:1327)	   at android.os.Parcel.readException(Parcel.java:1281)	   at android.os.IPowerManager$Stub$Proxy.acquireWakeLock(IPowerManager.java:432)	   at android.os.PowerManager$WakeLock.acquireLocked(PowerManager.java:295)	   at android.os.PowerManager$WakeLock.acquire(PowerManager.java:264)	   at org.eclipse.paho.android.service.MqttService$NetworkConnectionIntentReceiver.onReceive(MqttService.java:794)	   at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)	   at android.os.Handler.handleCallback(Handler.java:605) 	   at android.os.Handler.dispatchMessage(Handler.java:92) 	   at android.os.Looper.loop(Looper.java:137) 	   at android.app.ActivityThread.main(ActivityThread.java:4573) 	   at java.lang.reflect.Method.invokeNative(Native Method) 	   at java.lang.reflect.Method.invoke(Method.java:511) 	   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788) 	   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555) 	   at dalvik.system.NativeStart.main(Native Method)	</code></pre>		<p>AndroidManifest....</p>		<p>`	</p>		<pre><code>&lt;application	    android:allowBackup="true"	    android:icon="@mipmap/ic_launcher"	    android:label="@string/app_name"	    android:supportsRtl="true"	    android:theme="@style/AppTheme"&gt;	    &lt;activity	        android:name=".MainActivity"	        android:label="@string/app_name"	        android:theme="@style/AppTheme.NoActionBar"&gt;	        &lt;intent-filter&gt;	            &lt;action android:name="android.intent.action.MAIN" /&gt;		            &lt;category android:name="android.intent.category.LAUNCHER" /&gt;	        &lt;/intent-filter&gt;	    &lt;/activity&gt;			    &lt;uses-permission android:name="android.permission.WAKE_LOCK" /&gt;	    &lt;uses-permission android:name="android.permission.INTERNET" /&gt;	    &lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;	    &lt;uses-permission android:name="android.permission.READ_PHONE_STATE" /&gt;		    &lt;service android:name="org.eclipse.paho.android.service.MqttService" &gt;	    &lt;/service&gt;	&lt;/application&gt;	</code></pre>		<p>`</p>		<p>Can anyone please help me to figure out the problem with my code. Thank you a lot!!!! </p>	"
37406894,37407362,37406894,2,2,Tue May 24 07:46:00 EDT 2016,504554,"<p>The exception has the key section in the middle:</p>		<pre><code>Caused by: java.lang.SecurityException: Neither user 10121 nor current process has android.permission.WAKE_LOCK.	</code></pre>		<p>Make sure you have added the required section to the application manifest</p>		<pre><code>&lt;uses-permission android:name="android.permission.WAKE_LOCK" /&gt;	</code></pre>	"
37406894,91466403,37407362,3,0,Mon Sep 10 14:01:00 EDT 2018,1584654,"Anybody solved this problem? It happens to me just with Android 8"
37406894,62322176,37407362,3,0,Tue May 24 07:52:00 EDT 2016,2108128,"Sir, Thank you a lot for your answer. I already added that permission in the manifest. Still I get the same error."
37406894,62322446,37407362,3,0,Tue May 24 08:01:00 EDT 2016,504554,"If you've added that in the right place then the exception should have changed"
37406894,62322589,37407362,3,0,Tue May 24 08:05:00 EDT 2016,2108128,"No Sir, I still get the same exception. I have edited the question. I have included the manifest as well. It will be really appreciated if you can help me through this. Thank you very much"
37406894,52287964,37406894,2,0,Wed Sep 12 05:21:00 EDT 2018,5980366,"<p>In my case i forgot add below 2 lines to Manifest:</p>		<pre><code>&lt;uses-permission android:name="android.permission.WAKE_LOCK" /&gt;	</code></pre>		<p>Of course you need add these permisions too:</p>		<pre><code>&lt;uses-permission android:name="android.permission.INTERNET" /&gt;	&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;	&lt;uses-permission android:name="android.permission.READ_PHONE_STATE" /&gt;	</code></pre>		<p>and in application scope add this line :</p>		<pre><code>&lt;service android:name="org.eclipse.paho.android.service.MqttService" /&gt;	</code></pre>	"
