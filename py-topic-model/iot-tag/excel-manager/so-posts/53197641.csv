thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
53197641,53197641,null,1,0,Wed Nov 07 20:53:00 EST 2018,10619994,"<p>I am currently trying to set up a MQTT system where I have a central broker (Broker 1) running on a server and requiring TLS encryption and a local broker (Broker 2) which is only accessible in my local network and not requiring any kind of encryption or authentication.	My „things“ will publish and subscribe to Broker 2 which should be configured as a bridge to Broker 1, so my things can publish and subscripe to topics on Broker 1 without implementing TLS themselves.</p>		<p>Broker 1 is a Mosquitto instance running on a Cent Os 6 server (my Uberspace) and is configured to require authentication and encryption using a Lets Encrypt certificate.</p>		<p>Mosquitto.conf:</p>		<pre><code>port &lt;port&gt;	persistence true	persistence_location /home/drparrot/mosquitto/var/lib/mosquitto/	log_dest topic	log_type error	log_type warning	log_type notice	log_type information	certfile /home/drparrot/.config/letsencrypt/live/&lt;url&gt;/cert.pem	cafile /home/drparrot/.config/letsencrypt/live/&lt;url&gt;//chain.pem	keyfile /home/drparrot/.config/letsencrypt/live/&lt;url&gt;/ /privkey.pem		allow_anonymous false		connection_messages true	log_timestamp true	</code></pre>		<p>Broker 2 is a mosquitto as well running on a raspberry pi which is connected to my local WiFi.	It is configured as a bridge to Broker 1.	mosquitto.conf:</p>		<pre><code>persistence true	persistence_location /var/lib/mosquitto/		log_dest file /var/log/mosquitto/mosquitto.log	log_type all		connection uberspace-bridge	address &lt;url&gt;:&lt;port&gt;	topic # out 0	topic # in 0	clientid &lt;id&gt;	username &lt;username&gt; 	password &lt;password&gt;	bridge_capath /etc/ssl/certs/	</code></pre>		<p>When I start Broker 2, I can verify from the logfile, that it tries to connect to Broker 1, but fails with the following message:</p>		<pre><code>1541447922: Bridge &lt;id&gt; sending CONNECT	1541447922: OpenSSL Error: error:1417110A:SSL routines:tls_process_server_hello:wrong ssl version	1541447922: Socket error on client local.&lt;id&gt;, disconnecting.	</code></pre>		<p>However, if I try to connect from the Raspberry Pi hosting Broker 2 to the server hosting Broker 1 via </p>		<pre><code>openssl s_client -connect &lt;url&gt;:&lt;port&gt; 	</code></pre>		<p>everything works fine, so I guess my certificates are all set up correctly and my open ssl versions on the raspberry and the server match in general. Moreover I am able to connect/publish/subscribe to Broker 1 from my Windows machine using MQTT.fx</p>		<p>Does anyone can give me hint what I am doing wrong or what I can do to further debug the problem?</p>	"
