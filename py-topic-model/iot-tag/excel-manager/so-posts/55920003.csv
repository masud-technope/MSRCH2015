thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
55920003,55920003,null,1,0,Tue Apr 30 11:33:00 EDT 2019,5036476,"<p>I want to write a C# application which gets messages out of an <a href="https://docs.microsoft.com/en-us/azure/iot-edge/iot-edge-runtime#iot-edge-hub" rel="nofollow noreferrer">IoT Edge hub</a> on an IoT Edge device before they are sent to the IoT Hub. </p>		<p>I want to write an end-to-end test for my IoT edge modules. To do this, I'm going to run the whole IoT edge runtime as well as an MQTT server within a Docker container. I then want to write a test which sends data to the MQTT server from outside the container and retrieves them back by connecting directly to the IoT edge hub.</p>		<p>My initial architecture looks like this:</p>		<p><a href="https://i.stack.imgur.com/7vDNR.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/7vDNR.png" alt="enter image description here"></a></p>		<p>But I want to have something like this:</p>		<p><a href="https://i.stack.imgur.com/koOT8.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/koOT8.png" alt="enter image description here"></a></p>		<p>I still need the IoT hub to create devices on the edge, but I want to listen directly to the edge hub to retrieve messages out of my pipeline.</p>		<p>I <em>could</em> write a "test module" which does my test within the container, but that's actually not what I want to do.</p>		<p>So my questions are:</p>		<ol>	<li>Is this actually possible to do?</li>	<li>Where can I get information on how to connect directly to IoT Edge hub?</li>	</ol>	"
55920003,98499509,55920003,3,0,Tue Apr 30 14:16:00 EDT 2019,1537195,"ok, so your test device is actually connecting to the MQTT endpoint of the Edge Hub?! Your picture is a bit misleading in this regard. I assume your "Edge module" is doing some sort of aggregation then?"
55920003,98495723,55920003,3,0,Tue Apr 30 12:33:00 EDT 2019,1537195,"A couple of questions: 1) Why does your "C# Test" create a device in IoT Hub? 2) Why do you need a MQTT server in a module? Can't your "C# Test" send messages directly to Edge hub (as a leaf IoT device)? 3) What do you actually want to test? :)"
55920003,98506063,55920003,3,0,Tue Apr 30 17:45:00 EDT 2019,5036476,"yes, my testcode is sending data to the mqtt server which actually sends it to the edge runtime. then a chain of modules is transforming the data. I then want to get the data back but not going over the iot hub."
55920003,98506401,55920003,3,0,Tue Apr 30 17:57:00 EDT 2019,1537195,"Ok got it. See my answer below"
55920003,98497901,55920003,3,0,Tue Apr 30 13:33:00 EDT 2019,5036476,"1) Because I want to do dynamic device creation in my test, e.g. set up device, test it, remove it	2) MWTT server is not in a module, its just in the same docker container than the IoT Edge runtime 	3) I just want to test the whole "Edge" side of the IoT (whole module pipeline) in a e2e fashion"
55920003,55926413,55920003,2,4,Tue Apr 30 17:57:00 EDT 2019,1537195,"<p>The Edge hub does not have an endpoint to consume messages from the outside like the IoT Hub does. So your only solution here would be to have another custom module that you route your messages into. This module then can expose an endpoint where it would provide the incoming messages to an outside system. </p>	"
55920003,98521978,55926413,3,0,Wed May 01 10:15:00 EDT 2019,1537195,"I havenâ€™t seen anything that says itâ€™s possible ;) but feel free to look in the source code and see if thereâ€™s maybe a hidden â€œback doorâ€? :)"
55920003,98516774,55926413,3,0,Wed May 01 05:13:00 EDT 2019,5036476,"just curious, but is there an official page saying it doesn't have an endpoint? I couldn't find anything about that. Thank you anyway :)"
