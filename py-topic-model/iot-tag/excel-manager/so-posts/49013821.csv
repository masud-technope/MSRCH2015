thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
49013821,49013821,null,1,1,Tue Feb 27 16:47:00 EST 2018,3998720,"<p>Using Azure IOT, I have my device endpoint pointing to Azure Blob storage.  Data is sent to the Blob, but i get non-ascii characters and am told that the file extension is incorrect.  Sample Blob data is </p>		<p><code>Objavro.codecnullavro.schemaÃ?{"type":"record","name":"Message","namespace":"Microsoft.Azure.Devices","fields":[{"name":"EnqueuedTimeUtc","type":"string"},{"name":"Properties","type":{"type":"map","values":"string"}},{"name":"SystemProperties","type":{"type":"map","values":"string"}},{"name":"Body","type":["null","bytes"]}]} Â±Â¡RÃ«ZÃ‹8Ã¨â‚¬â€˜,Â¡â€¦$â€¢	Ã 82018-02-20T15:12:16.1060000Z $connectionDeviceIdLane4Free(connectionAuthMethodÅ“{"scope":"device","type":"sas","issuer":"iothub","acceptingIpFilterRule":null}8connectionDeviceGenerationId$636543931333384343enqueuedTime82018-02-20T15:12:16.1060000Z d{"deviceId": "myPythonDevice","PinsCCC": 302.00,\}82018-02-20T15:12:16.2000000Z</code> </p>		<p>Azure IOT docs says that the format is Apache Avro, but I can't find anything on how to decode the  non-ascii characters.  I don't see where to specify a json extension.</p>	"
49013821,85089880,49013821,3,0,Thu Mar 01 03:56:00 EST 2018,3998720,"Reformatted -Here's the Python  code using MQTT.  `message =IoTHubMessage((msg_txt_formatted)) `	`message.ContentEncoding = "utf-8"; `	`message.ContentType = "application/json" ;` 	`client.send_event_async(message, send_confirmation_callback, message_counter)``"
49013821,85089396,49013821,3,0,Thu Mar 01 03:23:00 EST 2018,3998720,"Here's the Python  code that I use. -- message = IoTHubMessage((msg_txt_formatted)) ---	message.ContentEncoding = "utf-8";  ---	message.ContentType = "application/json" ---; 	client.send_event_async(message, send_confirmation_callback, message_counter)"
49013821,85046610,49013821,3,0,Wed Feb 28 01:39:00 EST 2018,6601582,"How do you send your data?"
49013821,49046402,49013821,2,1,Thu Mar 01 09:21:00 EST 2018,6601582,"<p>It seems <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-capture-overview" rel="nofollow noreferrer">by designed</a>.</p>		<p>You can utilize Avro tool to read or convert to JSON format.</p>		<p>Here is a <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-capture-python" rel="nofollow noreferrer">Python sample</a> to read Avro file. </p>	"
49013821,85211310,49046402,3,0,Mon Mar 05 03:33:00 EST 2018,6601582,"@CliffordEby Can you read valid JSON messages after corrected your code?"
49013821,85271787,49046402,3,0,Tue Mar 06 14:49:00 EST 2018,3998720,"Storage Explorer provides a GUI interface and selective download capabilities.  What is the recommended tool for analyzing IOT data stored in Blob storage?"
49013821,85334779,49046402,3,0,Thu Mar 08 02:59:00 EST 2018,6601582,"As a workaround, you can add another azure service: Stream Analytics. From stream analytics write data to the storage table and then analyze with PowerBI. [There is a sample](https://www.hackster.io/peejster/processing-iot-device-data-with-azure-and-power-bi-c00e35) you can reference."
49013821,85334809,49046402,3,0,Thu Mar 08 03:02:00 EST 2018,6601582,"[There is feedback](https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-store-data-in-azure-table-storage#next-steps) about your AVRO issue and it is assigned and will be updated. You can vote up it."
49013821,85166289,49046402,3,0,Sat Mar 03 03:09:00 EST 2018,3998720,"I created the sample capturereader.py using avro-python3.  Code finds my blob location **Downloaded a non empty blob: DuckpinFree/01/2018/02/20/17/03** but fails when reading blob in `raw_decode	    obj, end = self.scan_once(s, idx)` with error _json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes_ at line 1 col 46.  The data above puts col 46 well within the double quoted json.??"
49013821,85166785,49046402,3,0,Sat Mar 03 04:07:00 EST 2018,3998720,"I believe that i see the problem.  Line 2 of my data above(first line is header data) contains a non-json pair at about col 46.  IOTHub passes it to blob storage, but since it's not json, I can't read it with the Python Event Hub reader."
49013821,85271193,49046402,3,0,Tue Mar 06 14:35:00 EST 2018,3998720,"The sample capturereader.py code as written does download and remove all data from Blob storage.  Data are written to individual files in your local client directory.  Non-ascii characters are still present at Xs and other locations in the data - `ObjXXXavro.codecXnullXavro.schemaÃ?X`   I don't see anything in the avro spec about non-ascii and wonder what puts them there and why?"
49013821,85328067,49046402,3,0,Wed Mar 07 21:09:00 EST 2018,3998720,"Since my goal is to analyze the data, I connected the Blob account to PowerBI.  Data downloads to PowerBI, but parsing is a nightmare.  Can you point me to a Blob to PowerBI guide?"
49013821,85697445,49046402,3,0,Sun Mar 18 14:18:00 EDT 2018,2779990,"@RitaHan-MSFT - is there a C# sample?  And/or a way to convert the avro to json via an Azure streaming analytics function?"
49013821,85607769,49046402,3,0,Thu Mar 15 15:07:00 EDT 2018,3998720,"I don't need the functionality of Stream Analytics i.e input = output and I'm trying to minimize costs.  Any samples using functions?   I upvoted the AVRO issue - thx for directing me there."
49013821,49441772,49013821,2,0,Fri Mar 23 03:07:00 EDT 2018,4762422,"<p>From you original question, seems you need to read the content from ARVO file. Following are the steps to use C# to do that from Azure storage:</p>		<ol>	<li>Install Microsoft.Avro.Core nugget packege  </li>	</ol>		<p><a href="https://i.stack.imgur.com/1zYWx.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/1zYWx.png" alt="enter image description here"></a></p>		<ol start="2">	<li><p>Add following namespaces:</p>		<pre><code>using Microsoft.Hadoop.Avro;	using Microsoft.Hadoop.Avro.Container;	</code></pre></li>	<li><p>Get AVRO records</p>		<pre><code>private async Task&lt;List&lt;AvroRecord&gt;&gt; GetAvroRecordsAsync(CloudBlockBlob cloudBlockBlob)	{	    var memoryStream = new MemoryStream();	    await cloudBlockBlob.DownloadToStreamAsync(memoryStream);	    memoryStream.Seek(0, SeekOrigin.Begin);	    List&lt;AvroRecord&gt; avroRecords;	    using (var reader = AvroContainer.CreateGenericReader(memoryStream))	    {	        using (var sequentialReader = new SequentialReader&lt;object&gt;(reader))	        {	              avroRecords = sequentialReader.Objects.OfType&lt;AvroRecord&gt;().ToList();	        }	    }		    return avroRecords;	}	</code></pre></li>	<li><p>Deserialize the object from avro record:</p>		<pre><code>private MyObject GetMyObject(AvroRecord avroRecord)	{	    var body = avroRecord.GetField&lt;byte[]&gt;("Body");	    var dataBody= Encoding.UTF8.GetString(body);	    var myObj= JsonConvert.DeserializeObject&lt;MyObject&gt;(dataBody);	    return myObj;	}	</code></pre></li>	</ol>		<p>Hope this will be helpful to you.</p>	"
49013821,85954771,49441772,3,0,Sun Mar 25 13:03:00 EDT 2018,3998720,"The Python Sample above gives me the ability to read and desalinize the AVRO format.This may be what @Stinky Towel is looking for.  <br> I haven't found anything that explains the non-ascii characters inserted by Azure IOT. Also, I was hoping that a json object in Blob strorage would be fully supported by PowerBi that simplifies data downloads from Blob storage.  At present, it's very clumsy.   Thx for the response"
