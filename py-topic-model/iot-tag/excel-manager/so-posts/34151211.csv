thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
34151211,34151211,null,1,0,Tue Dec 08 08:32:00 EST 2015,1677359,"<p>I have an IoT device that is fetching a JSON file off of a web-server. The value inside the JSON file is modified by a PHP/HTML based webpage. The file on the server is set to 777 permissions and is correctly changing value. However when my IoT device is connecting to the server to parse the JSON, it is being served a copy of the file that is at least 8 days old. This header is being returned:</p>		<pre><code>HTTP/1.1 200 OK.	Content-Length: 15.	Content-Type: application/json.	Server: Apache.	Last-Modified: Mon, 30 Nov 2015 21:28:39 GMT.	Connection: keep-alive.	Date: Tue, 08 Dec 2015 08:22:36 GMT.	.	{"light": "on"}LED ON	closing connection.	</code></pre>		<p>What am I missing here. One possibility that comes to mind is that the server is sending back a cached response, instead of actual looking at the fresh version of the file and serving that.</p>	"
34151211,56049572,34151211,3,1,Tue Dec 08 08:39:00 EST 2015,5397059,"Try for test add GET pram at your link end like `link?p=4as6d46as4d` random string to see if it same result"
34151211,56049730,34151211,3,0,Tue Dec 08 08:44:00 EST 2015,1677359,"@Armen this is basically what my IoT device is targeting:	`const char* host     = "www.example.com"; // Your domain  	String path          = "/smarthome/light.json";`"
34151211,56050405,34151211,3,0,Tue Dec 08 09:06:00 EST 2015,1677359,"Doing what you suggested, returned the file with the current time and date as the last-modified value but the contents of the file are still the same."
34151211,56050654,34151211,3,0,Tue Dec 08 09:13:00 EST 2015,1677359,"@Armen correction: doing what you suggested yielded a twenty minute old file. A lot better than eight days but still not there. Is this something that needs to be fixed on the server?"
34151211,34153206,34151211,2,1,Tue Dec 08 10:13:00 EST 2015,5397059,"<p>So i guess you have some caching at server nigher in you IoT device</p>		<p>1) try to check in your <code>IoT device</code> if it has some caching</p>		<p>2) try to check server configuration if it has some caching</p>		<p>if you fail then only the option is to create some logic which will always generate unique pram at the end of your link in <code>IoT device</code>and retrieve json with that link.</p>	"
34151211,56057583,34153206,3,0,Tue Dec 08 12:03:00 EST 2015,1677359,"So, there's absolutely no caching on the server, according to my hosting company and phpinfo() output. No caching on the IoT device (esp8266 put to work as an Arduino). What on earth is going on here? One thing of note is that when I pass a random string as a GET variable to my page, I get the latest version of the page, otherwise I get an outdated version. When I shared this with my host, they said they were seeing the updated page. I have all caches disabled in all web browsers. :D"
34151211,56057784,34153206,3,0,Tue Dec 08 12:07:00 EST 2015,5397059,"Try to check that page with chrome incognito mode without random pram at the end"
34151211,56090020,34153206,3,0,Wed Dec 09 05:30:00 EST 2015,5397059,"Actually i'm not specialist in `IoT device` i can't help you with that, but i'm almost sure that problem is there. You can try to research about it like this. E.G you have some A labrarry for sending http requests you can search `Iot A lib disable caching` or something like that to finde the issue. And regarding that `?new=` pram its vale should be always unique  and random number can be repeat you have to give instead unique something for example current time stamp in seconds so it would be always new number or `time+random` string"
34151211,56069548,34153206,3,0,Tue Dec 08 16:47:00 EST 2015,1677359,"The solution I finally used, involved your suggestion. I put "?new=" at the end of the file path and then appended random(999) to it so that the request was different every time. It works but for some reason, the values of the json keep changing either automatically or someone on the internet is changing them. I can message you details if you would like to help a bit more on this! :)"
34151211,34177069,34151211,2,1,Wed Dec 09 10:58:00 EST 2015,1677359,"<p>Thanks to help from @Armen and a lot of reading online. It turned out that the there were two issues that were causing this:</p>		<p>I discovered that, in PHP, simply writing to a file does not modify it's 'last-modified' attribute and this was causing issues with the server sending the wrong version of the JSON file. To remedy the problem, I added <code>touch("path/to/file.json");</code> after each time the code wrote to the file and had closed the file pointer. What this did was it updated the last-modified attribute of the file, thus fixing the problem. I realize this is probably something very obvious but being a beginner myself, I think this is something that a lot of beginners might run into, so I thought I should share.</p>	"
34151211,68457485,34177069,3,0,Tue Nov 15 13:58:00 EST 2016,1677359,"Additionally, I later on figured out that some ISPs (like mine) have weird caching policies implemented, which were causing me to get stale responses from the server. I attempted connecting to the same server from a different network and I immediately started getting live responses."
