thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
54471721,54471721,null,1,0,Fri Feb 01 01:35:00 EST 2019,8391703,"<p>I'd like to log MQTT messages to persistent storage and log their control packet type, e.g. <code>CONNECT, CONNACK, PUBLISH, SUBSCRIBE</code> etc. Specifically I would like to use IoT SQL to only apply a rule where the control packet type is something specific, e.g. <code>PUBLISH</code>. Is this possible, I didn't see a relevant function to retrieve this information in the <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-sql-functions.html" rel="nofollow noreferrer">docs</a>. Something like <code>SELECT *, [control packet type] as method FROM '#' WHERE method = 'PUBLISH'</code>, where the brackets would be replaced with the value I'm looking for.</p>	"
54471721,54471896,54471721,2,2,Fri Feb 01 02:05:00 EST 2019,1373856,"<p>If you want to use the rules engine then you can infer the control packet type by the relevant topic. Rules that run against <a href="https://docs.aws.amazon.com/iot/latest/developerguide/cloud-watch-logs.html#message-broker-logs" rel="nofollow noreferrer">reserved topics</a> will allow you to trigger actions based on connect, disconnect, subscribe and unsubscribe control packets. A rule on all unreserved topics ('#') will correspond to a publish message. </p>		<p>There is also some metadata available in the <a href="https://docs.aws.amazon.com/iot/latest/developerguide/topics.html#reserved-topics" rel="nofollow noreferrer">message broker logs</a>.</p>	"
54471721,95751591,54471896,3,0,Fri Feb 01 02:10:00 EST 2019,8391703,"Thanks wasn't sure that's how the rules engine worked vis a vis unreserved vs reserved topics."
54471721,95751604,54471896,3,0,Fri Feb 01 02:10:00 EST 2019,8391703,"Sorry on reserved topics, how will I know which of the 4 control packets invoked the rule?"
54471721,95751698,54471896,3,1,Fri Feb 01 02:15:00 EST 2019,1373856,"It is implied by the specific reserved topic name. e.g. `$aws/events/presence/connected/+` will correlate to all connect packets. There are different reserved topics that correspond to disconnect, subscribe and unsubscribe packets."
