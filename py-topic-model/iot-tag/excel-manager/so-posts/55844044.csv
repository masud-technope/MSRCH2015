thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
55844044,55844044,null,1,0,Thu Apr 25 07:31:00 EDT 2019,1105564,"<p>We have the following certificate chain:</p>		<ul>	<li>RootCA -> IntermProduction -> [leaf certificates] </li>	<li>RootCA -> IntermTest -> [leaf test certificates]</li>	</ul>		<p>Does it make a difference if I:</p>		<ul>	<li>a) Upload to IoT hub RootCA</li>	<li>b) Upload to IoT hub both	IntermProduction and IntermTest (without RootCA)</li>	</ul>		<p>Will there be any differences in how leaf device certificates are validated? Our RootCA is self-signed company root.</p>		<p>The background of the question is, that I uploaded our rootCA to IoT hub, following MS samples <a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-security-x509-get-started" rel="nofollow noreferrer">here</a>. Our security specialist however refused to validate the proof of posession. Reason: Our rootCA is locked and no sub-certs should be issued. He asked me to point to the documentation where it is said, that we MUST use the rootCA. I didn't find such a point.</p>		<p>As I don't know the internals of IoT Hub, I'm a bit at a loss. We are migrating from a self-made service to IoT solution. In our own service I did implement the verification of the certificate chain myself, and I did need the root certificate for this.</p>		<p>Did somebody have a hands-on experience with something similar?</p>		<p>Of course it's an option to just upload two intermidiates and try it out, and I have a gut feeling that this will work, so the question is more like if I'm creating a potential security breach by doing so?</p>	"
55844044,56025887,55844044,2,0,Tue May 07 15:25:00 EDT 2019,5420074,"<p>I'm sorry for the delayed response. For your scenario, you can use option (b) with an intermediate CA uploaded to IoT Hub: 	•   Use your IntermProduction for your production Hub, and IntermTest for your test Hub. 	•   The leaf devices are validated starting with the intermediate CA, which is chained up through to your root CA.	•   Your security specialist should be able to allow Proof-of-Possession (PoP) for the intermediate CA. </p>		<p>Using this option gives you the security and flexibility of using an intermediate CA, while limiting the use of the root CA itself (i.e. root CA is not uploaded to the IoT Hub).</p>	"
