thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
56569417,56569417,null,1,0,Wed Jun 12 19:46:00 EDT 2019,11449582,"<p>I am developing an I2C solution for a Raspberry Pi and Teensy 3.6 Arduino . The Pi is going to send NTP via I2C to the Arduino. I have done research for weeks, and tried to test the code below, and receive a couple errors.</p>		<pre><code>public sealed class StartupTask : IBackgroundTask	{	    public async void Run(IBackgroundTaskInstance taskInstance)	    {	        while(true)	        {	            Wait(5000);	            try	            {	                await I2C();	            }	            catch (Exception ex)	            {	                // eats fast inputs	            }	        }	    }		    private async void Wait(int millis)	    {	        await Task.Delay(millis);	    }		    private async Task I2C()	    {	        var settings = new I2cConnectionSettings(1);	        settings.BusSpeed = I2cBusSpeed.FastMode;	        var controller = await I2cController.GetDefaultAsync();		        using (I2cDevice device = controller.GetDevice(settings))	        {	            byte[] writeBuf = { 0x01, 0x02, 0x03, 0x04 };	            device.Write(writeBuf);	        }	    }	}	</code></pre>		<p>Using the debug console, I have found that the I2C method never goes all the way through the using statement.</p>		<p>EXCEPTIONS:</p>		<p>Exception thrown: 'System.Runtime.InteropServices.COMException' in i2cTestIOT.winmd	WinRT information: Unexpected number of bytes was transferred. Expected: '. Actual: '.	Exception thrown: 'System.Runtime.InteropServices.COMException' in System.Private.CoreLib.ni.dll	WinRT information: Unexpected number of bytes was transferred. Expected: '. Actual: '.</p>	"
56569417,56572794,56569417,2,0,Thu Jun 13 02:59:00 EDT 2019,6601582,"<p>I can't reproduce this error with Raspberry pi and Arduino Uno using exact your code.(If it is a complete reproducible code). So </p>		<blockquote>	  <p>Using the debug console, I have found that the I2C method never goes	  all the way through the using statement.</p>	</blockquote>		<p>Make sure the <code>1</code> is the right I2C address for your Teensy 3.6 Arduino and check the SDA and SCL connect correctly. Refer to <a href="https://docs.microsoft.com/en-us/windows/iot-core/learn-about-hardware/pinmappings/pinmappingsrpi" rel="nofollow noreferrer">Windows IoT Core pin mappings</a>. </p>		<p>Add <code>deferral = taskInstance.GetDeferral();</code> if you want the <a href="https://docs.microsoft.com/en-us/windows/iot-core/develop-your-app/backgroundapplications#how-are-background-applications-used" rel="nofollow noreferrer">background application</a> always running. Otherwise when the Run method ends, the background application ends. </p>		<pre><code>private BackgroundTaskDeferral deferral;	public void Run(IBackgroundTaskInstance taskInstance)	{	    deferral = taskInstance.GetDeferral();		    //	    // TODO: Insert code to start one or more asynchronous methods	    //	}	</code></pre>		<p>Try the StandardMode speed first then FastMode later.</p>	"
56569417,99781956,56572794,3,0,Fri Jun 14 17:47:00 EDT 2019,11449582,"I gave up on using I2C, I just decided to use UART and it works perfectly. Thanks for your help otherwise :)"
56569417,99744924,56572794,3,0,Thu Jun 13 15:03:00 EDT 2019,11449582,"Also, I used the deferral line and now I get a new error.		`sending i2c data	Exception thrown: 'System.IO.FileNotFoundException' in i2cTestIOT.winmd	WinRT information: Slave address was not acknowledged.	Exception thrown: 'System.IO.FileNotFoundException' in System.Private.CoreLib.ni.dll	WinRT information: Slave address was not acknowledged.`		I have connected pin 3(pi) to pin 18(teensy) and pin 5(pi) to pin 19(teensy). I am not sure if I need to connect the Vout and Vin to each board. 		https://www.pjrc.com/teensy/td_libs_Wire.html"
56569417,99744702,56572794,3,0,Thu Jun 13 14:58:00 EDT 2019,11449582,"Hi Rita, thanks for the reply. 		For the address, I am using the i2c_t3 library, and I have tried a couple different addresses, currently I am using this line of code for the Arduino to start i2c:	`Wire.begin(I2C_SLAVE, 1, I2C_PINS_18_19, I2C_PULLUP_EXT, 400000);`"
56569417,99758097,56572794,3,0,Fri Jun 14 01:22:00 EDT 2019,6601582,"@Jared Connect the GND of two board together and show your Arduino side code."
