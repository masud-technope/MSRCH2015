thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
35725763,35725763,null,1,1,Tue Mar 01 14:38:00 EST 2016,1665741,"<p>Having some trouble processing messages created in the Azure IoT Hub.</p>		<p>Getting the following eror:  Exception thrown: 'Microsoft.ServiceBus.Messaging.Amqp.AmqpException' in Microsoft.ServiceBus.dll ("An AMQP error occurred (condition='amqp:link:redirect').")</p>		<p>Can anyone point me in the right direction?</p>		<p>Regards,	Jonas</p>		<pre><code>using System;	using System.Collections.Generic;	using System.Linq;	using System.Text;	using System.Threading.Tasks;	using Microsoft.ServiceBus.Messaging;		namespace IOTHubMessageProcessor	{	    class Program	    {	        static string connectionString = "HostName=yaddaaaa.azure-devices.net;SharedAccessKeyName=iothubowner;SharedAccessKey=keydataasdss+tacsCxwkWQeUm9sMCc2GHnQkIZHM=";	        static string iotHubD2cEndpoint = "messages/events";	        static EventHubClient eventHubClient;	        static void Main(string[] args)	        {		            Console.WriteLine("Receive messages\n");	            eventHubClient = EventHubClient.CreateFromConnectionString(connectionString, iotHubD2cEndpoint);		            var d2cPartitions = eventHubClient.GetRuntimeInformation().PartitionIds;		            foreach (string partition in d2cPartitions)	            {	                ReceiveMessagesFromDeviceAsync(partition);	            }	            Console.ReadLine();	        }			        private async static Task ReceiveMessagesFromDeviceAsync(string partition)	        {	            var eventHubReceiver = eventHubClient.GetDefaultConsumerGroup().CreateReceiver(partition, DateTime.UtcNow);		            while (true)	            {	                EventData eventData = await eventHubReceiver.ReceiveAsync();	                if (eventData == null) continue;		                string data = Encoding.UTF8.GetString(eventData.GetBytes());	                Console.WriteLine(string.Format("Message received. Partition: {0} Data: '{1}'", partition, data));	            }	        }	    }	}	</code></pre>	"
35725763,59133613,35725763,3,1,Tue Mar 01 17:23:00 EST 2016,1658906,"Shouldn't you be using the Event Hub-compatible endpoint to use EventHubClient?"
35725763,62801138,35725763,3,0,Mon Jun 06 15:29:00 EDT 2016,4840671,"Hi, are you still having this issue?"
35725763,35737497,35725763,2,0,Wed Mar 02 02:43:00 EST 2016,5760591,"<p>I don't encounter this issue when testing with your code, so it might be related to something else. I find the duplicate thread <a href="https://stackoverflow.com/questions/35319395/azure-iot-hub-basic-receiving-example-amqp-error/35334813">Azure IoT hub basic receiving example, AMQP error</a>, it suggests check on block port or proxy settings, you can try it.</p>	"
35725763,35751172,35725763,2,0,Wed Mar 02 15:16:00 EST 2016,3374335,"<p>Your iotHubD2cEndpoint has an incorrect format. You can find your compatible endpoint in your azure portal -> messages -> device to cloud settings.</p>		<p>I found this a very helpful example: <a href="https://github.com/ppatierno/codesamples/tree/master/IoTHubAmqp/IoTHubAmqp" rel="nofollow">https://github.com/ppatierno/codesamples/tree/master/IoTHubAmqp/IoTHubAmqp</a></p>	"
35725763,36223259,35725763,2,0,Fri Mar 25 15:51:00 EDT 2016,1354712,"<p>Code looks fine to me. Mine is identical and works well.</p>		<p>Your best bet is to create a new IoT hub in Azure and replace the strings. </p>	"
35725763,36270812,35725763,2,0,Mon Mar 28 20:41:00 EDT 2016,4840671,"<p>While building the connectionstring, can you try "Endpoint=" instead of "HostName=" on line 12? </p>		<p>Hope this helps!</p>		<p>Mert</p>	"
35725763,36505791,35725763,2,0,Fri Apr 08 17:27:00 EDT 2016,5560198,"<p>A couple of comments:</p>		<ol>	<li>Please ensure that you are using the latest version of the Service Bus dll. i.e., 3.1.7 (as of today).</li>	<li>Please do not mix async and sync method calls in your code. </li>	</ol>		<p>Let us know if you are still encountering this issue.</p>	"
35725763,37647323,35725763,2,0,Sun Jun 05 22:15:00 EDT 2016,5185674,"<p>Sometimes I see that the proxy filters amqp packets. Changing the transport type to http probably will solve the problem.	Now I don't have access to Visual Studio but I seem to remember that it is possible to set the transport under the client properties. 	If you try it you can easily find if the problem is in the proxy or in the program.</p>	"
