thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
51769717,51769717,null,1,0,Thu Aug 09 14:33:00 EDT 2018,165032,"<p>I installed the IOT Edge runtime using below link:<br>	<a href="https://docs.microsoft.com/en-us/azure/iot-edge/how-to-install-iot-edge-linux-arm" rel="nofollow noreferrer">https://docs.microsoft.com/en-us/azure/iot-edge/how-to-install-iot-edge-linux-arm</a></p>		<p>I am following the below tutorial to deploy a docker image to IOT Edge (Rasberry Pi):<br>	<a href="https://docs.microsoft.com/en-us/azure/iot-edge/quickstart-linux" rel="nofollow noreferrer">https://docs.microsoft.com/en-us/azure/iot-edge/quickstart-linux</a> <br>	and able to deploy the tempSensor image to my Rasberry Pi </p>		<p>I decided to deploy my own program "blink.py". 	<br>I created the program and its working fine in the local Rasberry Pi using below command: <br></p>		<pre><code>$docker container run --device /dev/gpiomem -d blink	</code></pre>		<p>I followed the below steps to deploy my own program from Azure IOT Edge portal:	<br>1.) Create a docker image using Dockerfile:</p>		<pre><code>FROM arm32v7/python:2.7.15-stretch	COPY blink.py	CMD ["python","./blink.py"]	</code></pre>		<p>then ran the command:</p>		<pre><code>$docker build -t "blink" ./	</code></pre>		<p>2.) Now i pushed the image to Azure container Registry. Followed below steps:</p>		<p>a.) Login to Azure container registry</p>		<pre><code>$docker login blink.azurecr.io	</code></pre>		<p>b.) Push to Azure container registry</p>		<pre><code>$docker tag blink link.azurecr.io/blink	$docker push blink.azurecr.io/blink	</code></pre>		<p>3.) Deploy image in Azure container registry to IOT Edge device using below link:	<a href="https://docs.microsoft.com/en-us/azure/iot-edge/quickstart-linux#deploy-a-module" rel="nofollow noreferrer">https://docs.microsoft.com/en-us/azure/iot-edge/quickstart-linux#deploy-a-module</a>	<br><br></p>		<p>I see a container image created in the Raspberry Pi as "blink.azurecr.io/blink"	<BR>	I see that IOTEdge runtime tried to deploy this image as container but it failed.	<br>When i try to see the logs using command</p>		<pre><code>&gt;docker logs blink	</code></pre>		<p><br>It shows an error:	<br>  </p>		<pre><code>Traceback (most recent call last):	  File "./blink.py", line 6, in &lt;module&gt;	    GPIO.setup(4,GPIO.OUT) 	RuntimeError: No access to /dev/mem. Try running as root!	</code></pre>		<p><br><br>	Seems like some access issue but not sure how to solve it?	Do i need to put anything in the createOptions while deploying the edge module from azure portal ?</p>		<p>-Sandy</p>	"
51769717,51782444,51769717,2,0,Fri Aug 10 08:42:00 EDT 2018,8546089,"<p>From the error log, it seems that the module has no permission to access device/gpio. <strong>sudo</strong> should be able to used inside the container. You can try to add the following command in Dockerfile.</p>		<pre><code>RUN apt-get update &amp;&amp; apt-get -y install sudo		RUN useradd -m docker &amp;&amp; echo "docker:docker" | chpasswd &amp;&amp; adduser docker sudo	</code></pre>		<p>This <a href="https://stackoverflow.com/questions/25845538/how-to-use-sudo-inside-a-docker-container">topic</a> in stackoverflow as a reference.</p>	"
51769717,90532822,51782444,3,0,Fri Aug 10 13:38:00 EDT 2018,165032,"This didn't work after adding the command in the Dockerfile."
51769717,51792424,51769717,2,0,Fri Aug 10 18:45:00 EDT 2018,165032,"<p>ok so it worked!	I provided below in the createOptions:</p>		<pre><code>{	    "HostConfig": {	        "Devices": [	            {	                "PathOnHost": "/dev/gpiomem",	                "PathInContainer": "/dev/gpiomem",	                "CgroupPermissions": "rwm"	            }	        ]	    }	}	</code></pre>		<p>After re-deploying.. it worked, Hurray !!!!</p>	"
