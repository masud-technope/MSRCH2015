thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
57055166,57055166,null,1,1,Tue Jul 16 10:25:00 EDT 2019,11533072,"<p>I am trying to provision a device and send actuation commands back using 2 components Orion and LoRaWAN IoT Agent.</p>		<p>I am running Orion and other components on docker-compose file, and the IoT Agent using <code>node bin/iotagent-lora</code></p>		<p>I have successfully provisioned the device using :</p>		<pre><code>curl -iX POST \	  'http://localhost:4061/iot/devices' \	  -H 'Content-Type: application/json' \	  -H 'fiware-service: agriculture' \	  -H 'fiware-servicepath: /irrigation' \	  -d '{	  "devices": [	    {	      "device_id": "pycom1",	      "entity_name": "urn:ngsi-ld:tempHumid:001",	      "entity_type": "tempHumid",	      "transport": "MQTT",		      "attributes": [	        {	    "object_id": "temperature",		          "name": "deviceState",	          "type": "Text"	        }],	      "commands": [	        {  		          "name": "on",	        "type": "command"	      },	        {       	          "name": "off"	        ,"type": "command"	      }	       ],	        "internal_attributes": {	        "lorawan": {	          "application_server": {	            "host": "10.8.244.180",	            "username": "admin",	            "password": "admin",	            "provider": "loraserver.io"	          },	          "dev_eui": "0097da62c6b67443",	          "app_eui": "70B3D57ED000985F",	          "application_id": "1",	          "application_key": "2b043fb00af7c6ac4075a35b8a18fc9c",	          "data_model":"application_server"	        }}}]}'	</code></pre>		<p>an automatic registrations is created in Orion after provisioning the device:</p>		<pre><code>{	    "id": "5d2d9f4f795d881c2355ab7c",	    "expires": "2020-07-16T09:56:31.00Z",	    "dataProvided": {	        "entities": [{	            "id": "urn:ngsi-ld:tempHumid:001",	            "type": "tempHumid"	        }],	        "attrs": ["on", "off"]	    },	    "provider": {	        "http": {	            "url": "http://localhost:4061"	        },	        "supportedForwardingMode": "all",	        "legacyForwarding": true	    },	    "status": "active"	}	</code></pre>		<p>Following this <a href="https://fiware-tutorials.readthedocs.io/en/latest/iot-over-mqtt/index.html#enabling-context-broker-commands" rel="nofollow noreferrer">tutorial</a> I have created another registration for actuation commands like the following:</p>		<pre><code>curl -iX POST \	  'http://localhost:1026/v2/registrations' \	  -H 'Content-Type: application/json' \	  -H 'fiware-service: agriculture' \	  -H 'fiware-servicepath: /irrigation' \	  -d '{	  "description": "Pump Commands",	  "dataProvided": {	    "entities": [	      {	        "id": "urn:ngsi-ld:tempHumid:001", 		        "type": "tempHumid"	      }	    ],	    "attrs": [ "on", "off" ]	  },	  "provider": {	    "http": {"url": "http://localhost:1026/v1"},	    "legacyForwarding": true	  }	}'	</code></pre>		<p>I have tried to use the proposed <a href="https://stackoverflow.com/questions/56427851/fiware-iot-agent-ul-send-command-value-via-mqtt-to-device">solution</a> to an issue similar to the one I am facing, and after trying, I have obtained this error:</p>		<pre><code>{"error":"NotFound","description":"The requested entity has not been found. Check type and id"}	</code></pre>		<p>while Orion reported </p>		<blockquote>	  <p>fiware-orion Starting transaction to <a href="http://localhost:4061//updateContext" rel="nofollow noreferrer">http://localhost:4061//updateContext</a></p>	</blockquote>		<p>I don't know if it is linked to this issue but a similar bug (double slash in url) was already reported in <a href="https://github.com/telefonicaid/fiware-orion/issues/2141" rel="nofollow noreferrer">here</a></p>		<pre><code>fiware-orion   | INFO@10:16:34  logMsg.h[1844]: Starting transaction to http://localhost:4061//updateContext	fiware-orion   | INFO@10:16:34  httpRequestSend.cpp[592]: Sending message 4 to HTTP server: sending message of 447 bytes to HTTP server	fiware-orion   | ERROR@10:16:34  postUpdateContext.cpp[190]: Runtime Error (error 'Couldn't connect to server' forwarding 'Update' to providing application)	fiware-orion   | INFO@10:16:34  logMsg.h[1874]: Transaction ended	</code></pre>		<p>Thank you in advance</p>	"
