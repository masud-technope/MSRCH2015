thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
53153806,53153806,null,1,1,Mon Nov 05 11:47:00 EST 2018,2868900,"<p>I am programming a PLC device (Moxa ioLogik E1214) and have connected the DI ports to buttons, and the coils are connected to LED lights. The idea is that when you press a button, the LED should light up. </p>		<p>I have gotten the program to work if you hold down the button until the read input function executes. The problem is that I'd like to set a time frame (X seconds) and if the button is pressed (and not held down) within this timeframe the light should toggle. </p>		<p>The code is below: </p>		<pre><code>import time	import logging	logging.basicConfig()	log = logging.getLogger()	log.setLevel(logging.DEBUG)		from pprint import pprint	from pymodbus.client.sync import ModbusTcpClient as ModbusClient		moxaA = ModbusClient('XX.XX.XX.XX', port=502)		print "Press a button now"		time.sleep(2)	result = moxaA.read_input_registers(0x30, 1)	if result:	    pressedBtn = result.registers[0]	    if pressedBtn == 1:	        moxaA.write_coil(0, 1)	    else: 	        moxaA.write_coil(0, 0)	</code></pre>		<p>As you can see I've set a timeout for the reading of the input registers. But how can I "listen" for an input change within these seconds, and not have to hold the button down until the read input registers function executes?</p>		<p>Thanks in advance</p>	"
53153806,53154336,53153806,2,1,Mon Nov 05 12:21:00 EST 2018,3702377,"<p>You forgot some arguments (<code>unit</code>, <code>connect</code>, <code>isError()</code>).</p>		<hr>		<p>I improved your snippet code:</p>		<pre><code>moxaA = ModbusClient('XX.XX.XX.XX', port=502)		if moxaA.connect()	    print "Press a button now"	    time.sleep(2)	    result = moxaA.read_input_registers(0x30, 1, unit=1)		    if not result.isError():	        pressedBtn = result.registers[0]		        if pressedBtn == 1:	            moxaA.write_coil(0, 1, unit=1)	        else: 	            moxaA.write_coil(0, 0, unit=1)	</code></pre>		<hr>		<p>[<strong>NOTE</strong>]:</p>		<ul>	<li>With the above <code>sleep(2)</code> you should press the button 2 seconds or after 2 seconds.</li>	<li><code>isError()</code> defined in the <em>pymodbus 1.4.0</em> and above.</li>	<li>You should specify the <code>unit</code>, in many cases <code>unit</code> is equal <code>1</code>.</li>	</ul>	"
53153806,93436838,53154336,3,0,Tue Nov 13 09:10:00 EST 2018,3702377,"@user2868900 Did your problem solved?"
53153806,93199524,53154336,3,0,Mon Nov 05 12:41:00 EST 2018,2868900,"Thank you for the improvements, much appreciated. However, is it possible to instead of having a time.sleep() to add some kind of javascript's eventListener to listen for a button press, and then return the input register?"
53153806,93438019,53154336,3,1,Tue Nov 13 09:42:00 EST 2018,2868900,"I did, thank you for the help. I will post a reply with the solution"
53153806,93208551,53154336,3,0,Mon Nov 05 17:08:00 EST 2018,3702377,"@user2868900 I don't know about how with js, but you can use a `while` instead of `time.sleep()`"
