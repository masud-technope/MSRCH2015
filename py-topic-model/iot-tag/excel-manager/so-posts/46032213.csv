thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
46032213,46032213,null,1,0,Mon Sep 04 07:25:00 EDT 2017,6022340,"<p><strong><em>want to start development with AWS IOT using Android app</em></strong></p>		<p>I am seeking for example for IOT in android. need to start basic configuration on AWS console and android app. i already tested temperature  demo but didn't get any clue from that! need a basic steps on shadow, policy , role. how to configure them step by step and use of cognito.</p>		<p><em>below getshadow() method is called onCreate , need to update value on real time basis not ony onCreate.</em></p>		<pre><code>  public void getShadows() {		        GetShadowTask getControlShadowTask = new GetShadowTask("TemperatureControl");	       getControlShadowTask.execute();	    }			    private class GetShadowTask extends AsyncTask&lt;Void, Void, AsyncTaskResult&lt;String&gt;&gt; {		        private final String thingName;		        public GetShadowTask(String name) {	            thingName = name;	        }		        @Override	        protected AsyncTaskResult&lt;String&gt; doInBackground(Void... voids) {	            try {	                GetThingShadowRequest getThingShadowRequest = new GetThingShadowRequest()	                        .withThingName(thingName);	                GetThingShadowResult result = iotDataClient.getThingShadow(getThingShadowRequest);	//                Toast.makeText(getApplication(),result.getPayload().remaining(),Toast.LENGTH_LONG).show();	                byte[] bytes = new byte[result.getPayload().remaining()];	                result.getPayload().get(bytes);	                String resultString = new String(bytes);	                return new AsyncTaskResult&lt;String&gt;(resultString);	            } catch (Exception e) {		                Log.e("E", "getShadowTask", e);	                return new AsyncTaskResult&lt;String&gt;(e);	            }	        }		        @Override	        protected void onPostExecute(AsyncTaskResult&lt;String&gt; result) {	            if (result.getError() == null) {	                JsonParser parser=new JsonParser();	                JsonObject jsonObject= (JsonObject) parser.parse(result.getResult());	response=result.getResult();	         setPoint=jsonObject.getAsJsonObject("state").getAsJsonObject("reported")	               .get("current_date").getAsString();	textView.setText(setPoint);	           //     Toast.makeText(getApplication(),setPoint,Toast.LENGTH_LONG).show();	                Log.i(GetShadowTask.class.getCanonicalName(), result.getResult());		            } else {	                Log.e(GetShadowTask.class.getCanonicalName(), "getShadowTask", result.getError());	                Toast.makeText(getApplication(),result.getError().toString(),Toast.LENGTH_LONG).show();	            }	        }	    }	</code></pre>		<p><strong>UPDATE</strong></p>		<p>Thing Shadow</p>		<p>{	  "desired": {	    "welcome": "aws-iot"	  },	  "reported": {	    "welcome": "aws-iot",	    "current_date": "06-Sep-2017 1:26:40 PM"	  }	}</p>	"
46032213,46048090,46032213,2,0,Tue Sep 05 06:12:00 EDT 2017,4944773,"<p>AWS has provided a complete <a href="https://github.com/awslabs/aws-sdk-android-samples" rel="nofollow noreferrer">Github repo</a> of Android samples. In the samples do the <a href="https://github.com/awslabs/aws-sdk-android-samples/tree/master/AndroidPubSubWebSocket" rel="nofollow noreferrer">PubSubWebSocket</a> to connect, subscribe and publish the data to the shadow. </p>		<p>If you have a closer look into the PubSubWebSocket example you will find a detailed information on how to to make a thing policy and role. It cannot be more concise and clear than that.</p>		<p>For understanding and using Cognito follow <a href="https://github.com/awslabs/aws-sdk-android-samples/tree/master/AmazonCognitoAuthDemo" rel="nofollow noreferrer">AmazonCognitoAuthDemo</a> example to make the identity pool and use it in the PubSubWebSocket example.</p>		<p>To get a better understanding of roles and Cognito. Please read the AWS documentation. </p>		<p><strong>Update:</strong>	In the IoT thing policy did you give appropriate permissions to connect, subscribe and publish. The option can be found in AWS IoT->Security->Policy->Create Policy.</p>		<pre><code>{	  "Version": "2012-10-17",	  "Statement": [	    {	      "Effect": "Allow",	      "Action": "iot:*",	      "Resource": "arn:aws:iot:us-east-2:293751794947:topic/replaceWithATopic"	    }	  ]	}	</code></pre>		<p>The above policy gives all access to the user. Also, make sure your pool which you created is for unauthenticated users.</p>		<p>To get the changes to the shadow type the following in the sample android(WebSocketAwsPubSub) edit box <code>$aws/things/thing_name/shadow/update/accepted</code></p>		<p>And to publish the data to the shadow type <code>$aws/things/thing_name/shadow/update</code></p>		<p><strong>Update 2:</strong>	Android Code where you will receive the reported messaged. Its suscribing to the device. Its the copy of the snippet from PubSubWebSocketSample.</p>		<pre><code>public void AwsSubscribe(){	    final String topic = "$aws/things/D1/shadow/update/accepted";		Log.d(LOG_TAG, "topic = " + topic);		try {	    mqttManager.subscribeToTopic(topic, AWSIotMqttQos.QOS0,	            new AWSIotMqttNewMessageCallback() {	                @Override	                public void onMessageArrived(final String topic, final byte[] data) {	                    runOnUiThread(new Runnable() {	                        @Override	                        public void run() {	                            try {	                                String message = new String(data, "UTF-8");	                                Log.d(LOG_TAG, "Message arrived:");	                                Log.d(LOG_TAG, "   Topic: " + topic);	                                Log.d(LOG_TAG, " Message: " + message);		                                tvLastMessage.setText(message);		                            } catch (UnsupportedEncodingException e) {	                                Log.e(LOG_TAG, "Message encoding error.", e);	                            }	                        }	                    });	                }	            });	} catch (Exception e) {	    Log.e(LOG_TAG, "Subscription error.", e);	}	</code></pre>		<p>}</p>	"
46032213,79097277,46048090,3,0,Wed Sep 06 06:43:00 EDT 2017,4944773,"If the shadow changes you will automatically receive the changes in the application. Head here for detailed understanding https://stackoverflow.com/questions/44113956/aws-iot-login-from-android-mqtt-client-using-iam-is-not-working/45993988#45993988"
46032213,79097610,46048090,3,0,Wed Sep 06 06:51:00 EDT 2017,6022340,"If possible provide me snippet. as per my research for getting realtime updates from shadow needs to define rules for triggering updates."
46032213,79097935,46048090,3,0,Wed Sep 06 07:01:00 EDT 2017,4944773,"Check the update"
46032213,79098143,46048090,3,0,Wed Sep 06 07:06:00 EDT 2017,6022340,"already completed policy, role and permission part.what i want is if any changes made to the shadow which will directly reflect on android device. and also want to know how to create topic and publish and subscribe to it."
46032213,79098998,46048090,3,0,Wed Sep 06 07:28:00 EDT 2017,6022340,"please refer updated question."
46032213,79099128,46048090,3,0,Wed Sep 06 07:32:00 EDT 2017,6022340,"yes already updating an getting shadow."
46032213,79099543,46048090,3,0,Wed Sep 06 07:43:00 EDT 2017,6022340,"so don't need to create topic for getting real time updates!"
46032213,79101663,46048090,3,0,Wed Sep 06 08:42:00 EDT 2017,4944773,"Check the update 2 it will solve your purpose"
46032213,79095291,46048090,3,0,Wed Sep 06 05:34:00 EDT 2017,6022340,"Ya i tried that example! but i'm stuck on how to create topic , subscribe to that topic and receive changes if shadow changes in real time. if you have developed something basic on iot please give me resources to understand it step by step."
46032213,79102774,46048090,3,0,Wed Sep 06 09:09:00 EDT 2017,6022340,"how to create topic in console? and link that topic to thing?"
46032213,79102923,46048090,3,0,Wed Sep 06 09:12:00 EDT 2017,6022340,"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/153756/discussion-between-jenish-keriwala-and-aarth-tandel)."
46032213,79099412,46048090,3,0,Wed Sep 06 07:39:00 EDT 2017,4944773,"Whenever the shadow is changed by the thing. It will automatically be reflected in the Android code (PubSubWebSocket) if you see the log. You will get the reported thing. Just make a JSON Parser and parse the data to get the updated thing. Do the following in the sample aws code. You will get to know what I am saying."
