thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
47185787,47185787,null,1,-1,Wed Nov 08 17:14:00 EST 2017,2166781,"<p>I'm playing around with MQTT and MQTT.js. I have running a MQTT broker and now I want to subscribe to multiple topics. One topic is no problem, but multiple.</p>		<p>I have these two topics:</p>		<pre><code>'sensor/esp8266-1/humidity'	'sensor/esp8266-1/temperature'	</code></pre>		<p>and I with this piece of code I subscribe on these two topics</p>		<pre><code>var mqtt = require('mqtt');	var client  = mqtt.connect('mqtt://10.0.0.18');			client.subscribe('sensor/esp8266-1/humidity');	client.subscribe('sensor/esp8266-1/temperature');		client.on('message', function(topic, message, packet) {	    console.log(packet)	});	</code></pre>		<p>With this code console.log returns me the following</p>		<pre><code>Packet {	  cmd: 'publish',	  retain: false,	  qos: 0,	  dup: false,	  length: 35,	  topic: 'sensor/esp8266-1/temperature',	  payload: &lt;Buffer 32 31 2e 32 30&gt; }	Packet {	  cmd: 'publish',	  retain: false,	  qos: 0,	  dup: false,	  length: 32,	  topic: 'sensor/esp8266-1/humidity',	  payload: &lt;Buffer 34 31 2e 30 30&gt; }	</code></pre>		<p>This looks at the first very good, but how can I get the temperature/humidity data from that?</p>		<p>I tried it with this</p>		<pre><code>console.log(packet.payload.toString())	</code></pre>		<p>But now I got every time temperature and humidty without which I know what number means.</p>		<p>In the End I would like to get two variables (temperature/humidity) fill with the right data. Later I want to concat the two variables and store these to an SQL Database.</p>	"
47185787,81321019,47185787,3,0,Wed Nov 08 17:25:00 EST 2017,2166781,"Yes but I cant find something, where do you find that?"
47185787,81321078,47185787,3,0,Wed Nov 08 17:27:00 EST 2017,504554,"https://www.npmjs.com/package/mqtt#mqttclientsubscribetopictopic-arraytopic-object-options-callback and you haven't answered the first question"
47185787,81321199,47185787,3,0,Wed Nov 08 17:30:00 EST 2017,2166781,"Yes I have seen this, but how can I read every single payload package?"
47185787,81321244,47185787,3,0,Wed Nov 08 17:32:00 EST 2017,504554,"I don't understand what you mean. Edit your original question to make it clearer what you are trying to achieve."
47185787,81321262,47185787,3,0,Wed Nov 08 17:33:00 EST 2017,2166781,"I think it is clear enough. I only want the Data from every Sensor as an own variable. With this code and these documentation it is not possbile to get for every topic the sensor data."
47185787,81320883,47185787,3,0,Wed Nov 08 17:21:00 EST 2017,504554,"What do you mean by "code is not very functionable." The code subscribes to 2 topics, which is exactly what you asked it to do"
47185787,81320950,47185787,3,0,Wed Nov 08 17:23:00 EST 2017,504554,"Also have you read the doc? It is very clear on how to subscribe to multiple topics and even offers 3 different ways to do it"
47185787,47186411,47185787,2,2,Wed Nov 08 17:48:00 EST 2017,504554,"<p>You've not said how you want to uses these 2 values but the following is the simplest way to start.</p>		<pre><code>var mqtt = require('mqtt');	var client  = mqtt.connect('mqtt://10.0.0.18');		var temperature;	var humidity;		client.subscribe('sensor/esp8266-1/humidity');	client.subscribe('sensor/esp8266-1/temperature');		client.on('message', function(topic, message, packet) {	  if (topic === 'sensor/esp8266-1/temperature') {	    temperature = message;	  }		  if (topic === 'sensor/esp8266-1/humidity') {	    humidity = message;	  }	});	</code></pre>		<p>You can make it a little simpler by using a single wildcard subscription:</p>		<pre><code>client.subscribe('sensor/esp8266-1/+');	</code></pre>		<p>Which will subscribe to all topics that start with <code>sensor/esp8266-1/</code></p>		<p>EDIT: 	Now we have finally thrashed out what you wanted to ask (NOT CLEAR IN THE QUESTION)</p>		<pre><code>client.on('message', function(topic, message, packet) {	  if (topic === 'sensor/esp8266-1/temperature') {	    temperature = message;	  }		  if (topic === 'sensor/esp8266-1/humidity') {	    humidity = message;	  }		  if (temperature &amp;&amp; humidity) {	     //do database update or print	     console.log("----");	     console.log("temp: %s", temperature);	     console.log("----");	     console.log("humidity: %s", humidity);	     //reset to undefined for next time	     temperature = undefined;	     humidity = undefined;	  }	});	</code></pre>	"
47185787,81321961,47186411,3,0,Wed Nov 08 17:52:00 EST 2017,2166781,"These give me to logouts with the same data!"
47185787,81322059,47186411,3,0,Wed Nov 08 17:54:00 EST 2017,504554,"yes, each message is a separate event, there is no way to get all the data at once. It's not how MQTT works"
47185787,81322106,47186411,3,0,Wed Nov 08 17:55:00 EST 2017,2166781,"Ok, than is that the problem, now I will do this on the Rest API way..."
47185787,81322128,47186411,3,0,Wed Nov 08 17:56:00 EST 2017,504554,"You could send both values in one message from your device"
47185787,81322157,47186411,3,0,Wed Nov 08 17:57:00 EST 2017,504554,"Or you can put a test in the `on('message')` callback to see if you have both values, then update the database"
47185787,81322211,47186411,3,0,Wed Nov 08 17:58:00 EST 2017,2166781,"That is a good idea, maybe a put a JSON or Array into the message..."
