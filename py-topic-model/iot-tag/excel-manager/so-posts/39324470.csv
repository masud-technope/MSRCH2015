thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
39324470,39324470,null,1,1,Mon Sep 05 05:37:00 EDT 2016,5308481,"<p>My publisher and broker are working on different systems. I am using QOS=2 for delivery of messages.I am using python paho mqtt broker. It is further extension to MQTT - Is there a way to check if the client is still connected</p>		<p>1) When I publish a message to connected broker, it acknowledge me by calling on_publish() callback. but when I disconnected my broker running on different machine from the network, the publisher stores the publish message on local machine and again when I connect my broker to network it publishes all previous messages to broker. I think these messages stored as inflight messages (not confirmed), if these messages are inflight messages, then where these messages are stored,is there any limit of these inflight messages as I have not include anything in my code regarding inflight messages.</p>	"
39324470,66049788,39324470,3,0,Wed Sep 07 01:48:00 EDT 2016,5730046,"As an extra to the mqtt spec, you may want to look at the source code, https://github.com/eclipse/paho.mqtt.c/blob/master/src/MQTTProtocolClient.c, line 142, it stores the messages to a local list when publishing."
39324470,39351874,39324470,2,1,Tue Sep 06 14:45:00 EDT 2016,6787686,"<p>Mqtt messages that are not delivered (the client hasn't received a PUBREL packet) are stored in it's local session storage area. . Similarly if the server has not received a PUBCOMP response for it's PUBREL message, it has to treat the message as unacknowledged and store relevant session state in it's local session storage area.  </p>		<p>The size of the cache on both sides (the server and the client) are directly determined by the configuration of the client or server.  This is mentioned in the first Non normative comment at the start of section 4.1 in the OASIS standard. </p>		<p>There is a good description (if occasionally confusing) description of this process for QoS 2 messages at <a href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html#_Toc398718102" rel="nofollow">the OASIS standard</a></p>	"
39324470,66081761,39351874,3,0,Wed Sep 07 18:34:00 EDT 2016,5308481,"this local storage exists only if our client constantly connected to power supply, if client disconnects from supply voltage all data will lost.. if i am correct? If yes is there any way we can store these data , send to broker when again client connected to broker?"
39324470,66081963,39351874,3,0,Wed Sep 07 18:42:00 EDT 2016,6787686,"Make sure you don't lose storage data when your device is disconnected. At some point, you have to accept loss of messages, because you can't do things like "save a message that hasn't even been sent yet". 		But if the message has been sent, but not completed the acknowledgement process, then it should be in the server's cache.  For QoS 2 messages, at least.  But again, if the network drops before the message can be sent, and then you lose power and you don't have persistent storage on the device, then the message is lost."
39324470,66116846,39351874,3,0,Thu Sep 08 15:53:00 EDT 2016,5308481,"Mqtt stored messages as flight messages in local cache when client is not connected to broker  for QOS =2 (Let me correct if i am wrong ) and these message lost if we disconnect power supply from system (again i am not sure) and we will lost all the data stored in local cache that's why i am thinking to store data in database. please correct me if i am wrong."
39324470,66151102,39351874,3,0,Fri Sep 09 14:04:00 EDT 2016,5308481,"jeff, i am using paho python library, i subscribe messages with QOS=2 and set clean session = false, I don't know how to save mqtt data in persistant memory, i would be great if you share your mail id so that i can contact you on mail because in coming time  i will really need your help to carry on my project."
39324470,66154108,39351874,3,0,Fri Sep 09 15:17:00 EDT 2016,6787686,"... by "persistent memory" I meant "physical memory that is not lost when the power is turned off".		Otherwise you could accept that some messages will be lost when the power is disconnected, and use QoS 1 or 0 messages, and do a cleanSession=true when the device powers up again."
39324470,66208030,39351874,3,0,Mon Sep 12 03:28:00 EDT 2016,214668,"Guys, Stack Overflow doesn't work like a forum.  All of the Q&A in the comments will be un-indexed, unsearchable and useless to other users who do not happen to find this question.  Please post succinct, 1-topic questions and good answers.  After that, follow up with a new question post and new answer to that.  But please do stick with it. SO is worth the effort of acclimating to the Q&A format here.  Welcome to SO!"
39324470,66107575,39351874,3,0,Thu Sep 08 12:21:00 EDT 2016,6787686,"The on_disconnect should basically be called when you have told the client to disconnect.  You can send ping requests periodically, and if you don't get a ping response you can know that the server is not available.  But the MQTT protocol is designed to isolate the client from the state of the network - that's the whole point of the client and server cache.  What are you trying to achieve by knowing that the server has disconnected the client?"
39324470,66093347,39351874,3,0,Thu Sep 08 05:19:00 EDT 2016,5308481,"Thanks jeff, I want to have one more question..Is there any way my client can detect unexpected disconnected from broker immediately. I am using mosquitto python library there is callback function called on_disconnect() which calls when client connects to broker again after disconnection, it doesn't call immediately. and one more thing is  the function on_disconnect() calls only when i shutdown my broker, it doesn't call when i disconnect my broker from network."
39324470,66113161,39351874,3,0,Thu Sep 08 14:25:00 EDT 2016,5308481,"I am working on GPS tracking system for that i am using raspberry pi and mqtt. I want to store all GPS data into local data base when my client disconnects from the broker and when again client connects with broker it sends all messages stored in database to broker(its like synchronisation process). But mosquitto python library function on_disconnect() doesn't call immediately, it calls when my client again become available to broker."
39324470,66114575,39351874,3,0,Thu Sep 08 14:57:00 EDT 2016,6787686,"MQTT already does that.  It stores unset messages locally on the client and resends them when the server is available again.  You don't need a database and you don't need to know when the server disconnects or reconnects."
39324470,66123045,39351874,3,0,Thu Sep 08 19:12:00 EDT 2016,6787686,"The messages are only lost when you disconnect the power if you do not have persistent memory, or some kind of local disk.  Using a database is much heavier than mqtt - it requires a database client and some kind of database program to execute... If you don't want to lose messages when your client disconnects from power, then use persistent memory or etc."
39324470,39691219,39324470,2,0,Sun Sep 25 19:57:00 EDT 2016,1180117,"<p>Paho mqtt Python client doesn't currently offer disk buffering.</p>		<p>For Paho Java client, by default the inflight messages are saved in memory(<a href="http://www.eclipse.org/paho/files/javadoc/index.html" rel="nofollow">1</a>). For retaining messages after a power failure you can file persistance class named MqttDefaultFilePersistence(<a href="https://www.eclipse.org/paho/files/javadoc/org/eclipse/paho/client/mqttv3/persist/MqttDefaultFilePersistence.html" rel="nofollow">2</a>)</p>	"
