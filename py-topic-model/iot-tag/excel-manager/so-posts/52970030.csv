thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
52970030,52970030,null,1,1,Wed Oct 24 13:16:00 EDT 2018,3725569,"<p>I have been building an IoT lamp that I want to be able to turn off and on with my phone.</p>		<p>I have working code to upload data from the ESP 8266 to my back-end -> my phpMyAdmin MySQL database. But when I try to send values to the device it won't work if I use some sort of</p>		<p><code>con.query("SELECT * FROM switch", function (err, result) { }</code>. </p>		<p>It doesn't work with .then and send the data from there either. See comments below (1 work, 2-3 don't).</p>		<p>I have tried with many different things pool as you see below among them.</p>		<pre><code>const express = require('express');	const router = express();	var mysql = require("mysql");		var con = mysql.createConnection({	    host: "localhost",	    user: "root",	    password: "",	    database: "light"	});		var pool = mysql.createPool({	    connectionLimit: 100,	    connectTimeout: 500000,	    acquireTimeout: 500000,	    queueLimit: 30,	    host: 'localhost',	    user: 'root',	    password: '',	    database: 'light',	    multipleStatements: true,	});		con.connect(function (err) {	    if (err) throw err;	});	router.get('/', (req, res, next) =&gt; {	// res.send("hello"); // 1 WORKS	    var GetLight = function () {	        return new Promise(function (resolve, reject) {	            con.query("SELECT * FROM switch", function (err, result) {		                // res.send("hello"); //2 Dont work	                if (err) {	                    return reject(err);	                } else {	                    return resolve(result);	                }		            });	        });	    }		    GetLight().then(Resultat =&gt; {		       //res.status(200).json(Resultat); //3 Dont work		    }).catch(err =&gt; {	        console.log(err);	        res.status(500).json({	            error: err	        });	    });	});	</code></pre>	"
52970030,92982919,52970030,3,0,Mon Oct 29 08:56:00 EDT 2018,3725569,"@thomasmichaelwallace That the con.query respons to slow was my guess aswell but i cant seem to get the respons to the esp8266 to wait. 		I made two checks, the first below checks inside the con.query and after, in this one the after log arrievs when the next request is  being made. The other check was after the query and logged the con object			`GET /light/ - - ms - -	Inside Query	After Query  <- this one comes when the next request is made	GET /light/ - - ms - -   <- When this request is made	Inside Query`		https://pastebin.com/nkLHRtBW"
52970030,92983110,52970030,3,0,Mon Oct 29 09:02:00 EDT 2018,2531132,"Could you just clarify what _does_ happen- e.g. do you get a res.status(500), or does the code not finish executing, or?"
52970030,92850132,52970030,3,0,Wed Oct 24 14:45:00 EDT 2018,2531132,"Can you put a log in after `con.query("SELECT * FROM switch", function (err, result) {` ? At a glance I can't see any reason why your code wouldn't work with promises. However I think it's possible that `con.query` will be stuck waiting for the connection to be formed or timeout if your configuration isn't right."
52970030,92983439,52970030,3,0,Mon Oct 29 09:11:00 EDT 2018,3725569,"I dont get a res at all, It think it never finishes because in the Esp i get Connection then Client timed out. 			It doesn't send any res, the first one below is a browser sent request and the after is the one from the esp 8266.	`GET /light 200 5.840 ms - 204	,	GET /light/ - - ms - -`"
