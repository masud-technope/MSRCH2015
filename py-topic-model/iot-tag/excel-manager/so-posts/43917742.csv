thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
43917742,43917742,null,1,0,Thu May 11 14:05:00 EDT 2017,7997851,"<p>I am new to IoT. I just installed mosquitto on my rpi and registered my devices and gateway in Watson IoT Platform using this tutorial: <a href="https://developer.ibm.com/recipes/tutorials/using-mosquitto-as-a-gateway-for-watson-iot/" rel="nofollow noreferrer">https://developer.ibm.com/recipes/tutorials/using-mosquitto-as-a-gateway-for-watson-iot/</a></p>		<p>Mosquitto works fine local mode. However, I am facing a problem subscribing/publishing using these commands:</p>		<pre><code> mosquitto_sub -d -h pxci52.messaging.internetofthings.ibmcloud.com  -i 'g:pxci52:myfstream:gateway' -t iot-2/type/myfstream/id/gateway/evt/status/fmt/raw	</code></pre>		<p>and</p>		<pre><code>sudo mosquitto_pub -d -h pxci52.messaging.internetofthings.ibmcloud.com  -i 'g:pxci52:myfstream:gateway' -t iot-2/type/myfstream/id/gateway/evt/status/fmt/raw -m "hello"	</code></pre>		<p>Here is my conf file:</p>		<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">	<div class="snippet-code">	<pre class="snippet-code-html lang-html prettyprint-override"><code>pid_file /var/run/mosquitto.pid		persistence true	persistence_location /var/lib/mosquitto/		log_dest topic			log_type error	log_type warning	log_type notice	log_type information		connection_messages true	log_timestamp true		include_dir /etc/mosquitto/conf.d	connection bridge-to-watsoniot	address pxci52.messaging.internetofthings.ibmcloud.com:1883	cleansession true	try_private false	bridge_attempt_unsubscribe false	notifications false	notification_topic iot-2/type/myfstream/id/gateway/evt/status/fmt/raw	remote_username token	remote_password xxxxxx	remote_clientid g:pxci52:myfstream:gateway	notifications true	topic iot-2/type/+/id/+/cmd/+/fmt/+ in iot-2/type/+/id/+/cmd/+/fmt/+	topic iot-2/type/+/id/+/evt/+/fmt/+ out iot-2/type/+/id/+/evt/+/fmt/+	connection_messages true</code></pre>	</div>	</div>	</p>	"
43917742,74869034,43917742,3,0,Thu May 11 14:13:00 EDT 2017,504554,"All 3 programs (mosquitto, mosquitto_sub & mosquitto_pub) are using the same client id, this won't work, each connection needs a unique id"
43917742,74869143,43917742,3,0,Thu May 11 14:15:00 EDT 2017,504554,"Also you seam to have posted your password, in the config file. Best to delete this question and repost without the password as even if you edit the question the password will still be in the history"
43917742,74869646,43917742,3,0,Thu May 11 14:25:00 EDT 2017,7997851,"ps:its easier to delete the device and start new one its already for test purpose"
43917742,74869670,43917742,3,0,Thu May 11 14:26:00 EDT 2017,7997851,"even when i lunch the pub only dosen't connect !!"
43917742,74869842,43917742,3,0,Thu May 11 14:29:00 EDT 2017,7997851,"on the ibm terminal side i get => Invalid userID (token) for device auth: ClientID='d:pqci52:myfstream:gateway', ClientIP=41.***.**.***	11 mai 2017 15:38:29	Closed connection from 41.***.**.***. The operation is not authorized. 2 times in the last 5 minutes"
43917742,43923978,43917742,2,0,Thu May 11 19:22:00 EDT 2017,4454969,"<p>I see in the log   Invalid userID (token) for device auth: ClientID='g:pqci52:myfstream:gateway'  Instead of just "token" try "use-token-auth"  That is what is specified in the recipe example you were following.  </p>	"
43917742,74898574,43923978,3,0,Fri May 12 08:37:00 EDT 2017,7997851,"i tryed both even i inject it in the cmd to make sure                               `sudo mosquitto_pub -d -h pqci52.messaging.internetofthings.ibmcloud.com -i 'g:pqci52:myfstream:gateway' -u  use-token-auth -P Nr0CHkXNbn3o+WFeMW -t iot-2/type/myfstream/id/gateway/evt/status/fmt/raw -m "hello" `     THANKS FOR YOUR HELP im switching to azure iothub i already wasted enaugh time on this"
43917742,74924260,43923978,3,0,Fri May 12 20:10:00 EDT 2017,4454969,"So it is successful for you now trying to connect with d as device?"
43917742,74916812,43923978,3,0,Fri May 12 16:12:00 EDT 2017,7997851,"i appreciate it,  `Token auth succeeded: ClientID='d:pqci52:myfstream:gateway', ClientIP=************`                     	 using `mosquitto_pub -d -h pqci52.messaging.internetofthings.ibmcloud.com -i 'd:pqci52:myfstream:gateway' -u use-token-auth -P Nr0CHkXNbn3o+WFeMW -t iot-2/type/myfstream/id/gateway/evt/status/fmt/raw -m "hello"`"
43917742,74979892,43923978,3,0,Mon May 15 08:54:00 EDT 2017,7997851,"yep every thing seems correct exept i've created two devices one raspberry pi subscribing and other publishing, they connect right but i had i mistake im still figuring it out: Closed connection from ***********. The topic is not valid: iot-2/type/myfstream/id/s2/evt/status The topic does not match an allowed rule"
43917742,74906220,43923978,3,0,Fri May 12 11:53:00 EDT 2017,4454969,"I checked the logs this morning and see Token auth failed (Device/gateway not found in database): ClientID='g:pqci52:myfstream:gateway'   so it's possible this device has not been registered as a gateway."
43917742,74986756,43923978,3,0,Mon May 15 11:54:00 EDT 2017,4454969,"A device can publish events and subscribe to commands:  iot-2/cmd/command_id/fmt/format_string  If you want to monitor events, then you may need to connect an application to subscribe to that topic. https://console.ng.bluemix.net/docs/services/IoT/applications/mqtt.html#mqtt"
