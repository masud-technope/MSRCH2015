thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
53845505,53845505,null,1,0,Wed Dec 19 06:12:00 EST 2018,10155930,"<p>I have seen code for individual enrollment but I can't find any for group enrollment. I need to bulk enroll a thousand devices to Azure IOT Hub and was thinking of group enrollment.Any sample code will be appreciated.</p>	"
53845505,53846413,53845505,2,1,Wed Dec 19 07:25:00 EST 2018,6565271,"<p>It should be possible both with group enrollment and bulk individual enrollments. From the <a href="https://github.com/Azure/azure-iot-sdk-csharp/tree/master/provisioning/service/samples" rel="nofollow noreferrer">samples</a> related to <a href="https://docs.microsoft.com/en-us/azure/iot-dps/how-to-manage-enrollments-sdks" rel="nofollow noreferrer">How to manage device enrollments with Azure Device Provisioning Service SDKs</a>:</p>		<p><strong>Bulk Individual Enrollments</strong></p>		<pre><code>public async Task&lt;List&lt;IndividualEnrollment&gt;&gt; CreateBulkIndividualEnrollmentsAsync()	{	    Console.WriteLine("\nCreating a new set of individualEnrollments...");		    List&lt;IndividualEnrollment&gt; individualEnrollments = new List&lt;IndividualEnrollment&gt;();		    foreach (var item in _registrationIds)	    {	        Attestation attestation = new TpmAttestation(item.Value);		        individualEnrollments.Add(new IndividualEnrollment(item.Key, attestation));	    }		    Console.WriteLine("\nRunning the bulk operation to create the individualEnrollments...");		    BulkEnrollmentOperationResult bulkEnrollmentOperationResult =		    await _provisioningServiceClient.RunBulkEnrollmentOperationAsync(BulkOperationMode.Create, individualEnrollments).ConfigureAwait(false);		    Console.WriteLine("\nResult of the Create bulk enrollment.");		    Console.WriteLine(bulkEnrollmentOperationResult);		    return individualEnrollments;	}	</code></pre>		<p><strong>Create Enrollment Group</strong></p>		<pre><code>public async Task CreateEnrollmentGroupAsync()	{	    Console.WriteLine("\nCreating a new enrollmentGroup...");		    Attestation attestation = X509Attestation.CreateFromRootCertificates(_groupIssuerCertificate);		    EnrollmentGroup enrollmentGroup =	        new EnrollmentGroup(	            EnrollmentGroupId,	            attestation);		    Console.WriteLine(enrollmentGroup);		    Console.WriteLine("\nAdding new enrollmentGroup...");		    EnrollmentGroup enrollmentGroupResult =	        await _provisioningServiceClient.CreateOrUpdateEnrollmentGroupAsync(enrollmentGroup).ConfigureAwait(false);		    Console.WriteLine("\nEnrollmentGroup created with success.");		    Console.WriteLine(enrollmentGroupResult);	}	</code></pre>		<p><strong>Update</strong></p>		<p>Take a look at the <a href="https://github.com/Azure-Samples/azure-iot-samples-csharp/tree/master/provisioning/Samples/device" rel="nofollow noreferrer">device</a> samples. You don't need to specify the enrollment type (individual/group) when registering the device. the correlation to the defined enrollment in the portal is done using the certificate the device uses when it registers.</p>		<p><strong>Update 2</strong></p>		<p>See <a href="https://docs.microsoft.com/en-us/azure/iot-hub/quickstart-control-device-dotnet" rel="nofollow noreferrer">Quickstart: Control a device connected to an IoT hub (.NET)</a> to see how to communicate with a device that was already enrolled to <strong>IoT Hub</strong></p>		<p>Hope it helps!</p>	"
53845505,94583639,53846413,3,0,Thu Dec 20 12:05:00 EST 2018,6565271,"Take a look at [X509Sample\Program.cs](https://github.com/Azure-Samples/azure-iot-samples-csharp/blob/master/provisioning/Samples/device/X509Sample/Program.cs) and [Common\ProvisioningDeviceClientSample.cs](https://github.com/Azure-Samples/azure-iot-samples-csharp/blob/master/provisioning/Samples/device/Common/ProvisioningDeviceClientSample.cs) to see how it can be done (their part of the device samples I mentioned in my answer)."
53845505,94561342,53846413,3,0,Wed Dec 19 17:56:00 EST 2018,6565271,"See update in answer"
53845505,94579491,53846413,3,0,Thu Dec 20 09:45:00 EST 2018,10155930,"But in Group Enrollment I wont be able to use TPM attestation right? I am fairly new to this  and I am under the impression that for group enrollment we don't need to enroll a device but create a device with the certification specified for group enrollment. And while running the device it will get enrolled. Correct me if I am wrong. So can you share a code where a device is created using a X509 attestation and added to group enrollment."
53845505,94750971,53846413,3,0,Fri Dec 28 09:52:00 EST 2018,10155930,"So I have created a group enrollment and added a sample device. So no I can communicate with that? Shouldnt I need the device connection string to do so? Also how can add another device to the group using the same X509 certificate. Do I need to create once for each device?"
53845505,94789312,53846413,3,0,Sun Dec 30 07:11:00 EST 2018,6565271,"I think you need an additional certificate derived from the same root certificate or intermediate certificate (see [Enrollment Group](https://docs.microsoft.com/en-us/azure/iot-dps/how-to-manage-enrollments-sdks#create-a-device-enrollment)). On how to control a connected device, see second update."
53845505,94541696,53846413,3,0,Wed Dec 19 08:19:00 EST 2018,10155930,"I have tried this and I was able to create a enrollment group using the second part of the code. How can I add devices to the group enrollment? Or am I missing anything?"
