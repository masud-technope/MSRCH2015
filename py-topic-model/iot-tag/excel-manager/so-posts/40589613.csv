thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
40589613,40589613,null,1,0,Mon Nov 14 13:13:00 EST 2016,6420048,"<p>while playing around with mqtt.js of node.js i figured out that the value of client.connected seem to be wrong or i misunderstand something. <br/>	I did this tutorial <a href="http://thejackalofjavascript.com/getting-started-mqtt/" rel="nofollow noreferrer">http://thejackalofjavascript.com/getting-started-mqtt/</a> and everything works fine. <br/><br>	I tried to get more into mqtt, so i looked up on <a href="https://www.npmjs.com/package/mqtt#mqttclientconnected" rel="nofollow noreferrer">https://www.npmjs.com/package/mqtt#mqttclientconnected</a> , Description of client.connected:</p>		<blockquote>	  <p>Boolean : set to true if the client is connected. false otherwise.</p>	</blockquote>		<p><br/></p>		<p>In order to look if it works, i modified the sourcecode for the firstline just like this</p>		<pre><code>var mqtt = require('mqtt')		client = mqtt.connect('mqtt://localhost');		  if (client.connected == true) {	        console.log("Connection successful.")	    }	    else{	        console.log("Something went wrong.")	    }		client.subscribe('presence');		console.log('Client publishing.. ');	client.publish('presence', 'Client 1 is alive.. Test Ping! ' + Date());		client.end();	</code></pre>		<p>I just added the if-clause. When executing the script, I always receive the message, that something went wrong, ergo: connected --> false. <br/>	But why?</p>	"
40589613,40590360,40589613,2,1,Mon Nov 14 13:53:00 EST 2016,504554,"<p>The problem is that the <code>mqtt.connect()</code> call is asynchronous. So it returns before it has actually connected. This means as you test the <code>mqtt.connected</code> straight after calling <code>mqtt.connect()</code> it will still be false because it's not actually finished connecting yet.</p>		<p>You need to register event handlers to be told when the client has actually been connected.</p>		<pre><code>var mqtt = require('mqtt')		var client = mqtt.connect('mqtt://localhost');		client.on('connected',function(){	  client.subscribe('presence');	  console.log('Client publishing.. ');	  client.publish('presence', 'Client 1 is alive.. Test Ping! ' + Date());	});		client.on('message',function(topic,message){	  console.log("received message on " + topic);	  console.log(message.toString());	  client.end();	});	</code></pre>		<p>This code connects to a broker, subscribes to the topic <code>presence</code> then publishes a message to that same topic. When it receives a message on the <code>presence</code> topic it prints it out then exits.</p>	"
