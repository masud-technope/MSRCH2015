thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
50258959,50258959,null,1,0,Wed May 09 17:26:00 EDT 2018,6575604,"<pre><code>I'm trying to create android app which can control Yeelight wifi color bulb. I've written simple peace of code that connect to Yeelight but I'm really not sure what exactly I'm doing wrong. 	</code></pre>		<p>This code contain simple SSDP message which connect on 239.255.255.250:1982 port.</p>		<p>All the devices connected to same wifi (bulb and phone)	I'm having D-Link DIR 600M router.</p>		<p>Exception : I'm getting connectiontimout exception. It doesn't matter how much time I set but this code will fail to connect after given time.</p>		<p>Apology for dirty code.</p>		<pre><code>**Here is the code**		    public void connectDevice(){	        try {		            byte[] sendData;	            byte[] receiveData = new byte[1024];	            DatagramSocket clientSocket=null;		    /* Create the search request */	            String NL = "\r\n";	            StringBuilder mSearch = new StringBuilder();	            mSearch.append("M-SEARCH * HTTP/1.1").append(NL);	            mSearch.append("HOST: 239.255.255.250:1982").append(NL);	            mSearch.append("MAN: \"ssdp:discover\"").append(NL);	            mSearch.append("ST: wifi_bulb");	            try {		    /* Send the request */	                sendData = mSearch.toString().getBytes();	                DatagramPacket sendPacket = new DatagramPacket(	                        sendData, sendData.length, InetAddress.getByName("239.255.255.250"), 1982);	                clientSocket = new DatagramSocket();	                clientSocket.setSoTimeout(50000);	                clientSocket.send(sendPacket);		    /* Receive one response */		                DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);	                clientSocket.receive(receivePacket);		            }	            catch (Exception e) {	                e.printStackTrace();	            }		            clientSocket.close();	        } catch (Exception e) {	            e.printStackTrace();	        }	    }	</code></pre>	"
50258959,87536394,50258959,3,0,Wed May 09 17:46:00 EDT 2018,9241978,"Did you turn on 3rd party LAN control for the bulb inside official Yeelight app?"
50258959,87550159,50258959,3,0,Thu May 10 05:35:00 EDT 2018,6575604,"No I didn't do it. And please let me know if it's absolute mandatory action to connect with yeelight color wifi bulb with 3rd party api and why?"
50258959,87575605,50258959,3,0,Thu May 10 18:42:00 EDT 2018,9241978,"Sadly Yeelight bulbs are proprietary devices and they just stop responding if you disable LAN control in the official app. How exactly do you disconnect from official app, do you unpair/reset them? I haven't encountered LAN control being automatically toggled off personally."
50258959,87576042,50258959,3,0,Thu May 10 18:55:00 EDT 2018,6575604,"I delete it from the offical app and try to connect with my 3rd party app. And I got timeout exception"
50258959,87576094,50258959,3,0,Thu May 10 18:57:00 EDT 2018,6575604,"Tell me what happen if I connect the bulb , switch on the LAN control and delete the bulb. And now try to connect it from 3rd party app.		I got timeout exception in this case. Have you ever experienced this?"
50258959,87576224,50258959,3,0,Thu May 10 19:02:00 EDT 2018,9241978,"Looks like unpairing from the app forces LAN control off, not much You can do about it."
50258959,87576363,50258959,3,0,Thu May 10 19:08:00 EDT 2018,6575604,"If this is case. Everytime 3rd party try to connect to yeelight wifi bulb they have to make sure it's already connected to official yeelight app and LAN control in ON. Right?"
50258959,87576856,50258959,3,0,Thu May 10 19:24:00 EDT 2018,9241978,"Yeah it's limitation put on by Xiaomi."
50258959,87576893,50258959,3,0,Thu May 10 19:26:00 EDT 2018,6575604,"Okay. I would like to thank you for your suggestions , they were really helpful. Thanks."
50258959,87571324,50258959,3,0,Thu May 10 16:25:00 EDT 2018,6575604,"I tried connect with bulb after switch on the LAN control(bulb connected to office yeelight app) in this case I'm able to connect to bulb.		But If I disconnect the bulb from official yeelight app and then try to connect to bulb with my 3rd party app I'm getting time out exception.		Could you please let me know how can I keep LAN control enable always without connect to official yeelight app."
