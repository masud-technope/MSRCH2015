thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
58100801,58100801,null,1,0,Wed Sep 25 14:31:00 EDT 2019,2022284,"<p>I have an energy monitor that can only output xml data via http post. I am looking to send this data to an azure-iot hub for processing and storage. What is the best way to send xml data to from several of these devices to the hub? I have looked at various gateways but havent found a simple, scalable, cost effective way to do this. I am open to having some sort of intermediary but they all  introduce a layer of complexity to simply sending the data to the hub.</p>	"
58100801,102594051,58100801,3,0,Wed Sep 25 14:54:00 EDT 2019,1051634,"One option, among many, would be to create an Azure Function that receives the XML documents that are HTTP POST'ed by your energy monitor(s), and that uses the Azure IoT SDK to publish said XML documents to IoT Hub "on behalf" of the energy monitors. It shouldn't be more that a few dozens line of Node.js."
58100801,102598079,58100801,3,0,Wed Sep 25 17:08:00 EDT 2019,2022284,"@kartben - I came across one post which outlined this method ( using azure functions). it was a bit over my head. I am looking for a dummy guide for azure functions tutorial  ( using python )  for this."
58100801,102798972,58100801,3,0,Thu Oct 03 00:14:00 EDT 2019,2522782,"It is unclear to me if the device is trying to send an HTTP POST to a webserver or if one has to make a POST request to the device to get the data returned. If the latter is true then you could use Azure IoT Edge running on a device somewhere. Write a module for your Edge that retrieves the data from your devices and then forwards it on to your IoT hub.This webpage might assist you in this: https://docs.microsoft.com/en-us/azure/iot-edge/how-to-vs-code-develop-module. Thinking about it, you could likely address the former with the same solution."
58100801,58102568,58100801,2,2,Wed Sep 25 16:10:00 EDT 2019,8084828,"<p>Your energy monitor can publish a telemetry data direct to the Azure IoT Hub using a <a href="https://docs.microsoft.com/en-us/rest/api/iothub/device/senddeviceevent" rel="nofollow noreferrer">HTTPs protocol</a>. </p>		<p>The following is an example:</p>		<p><a href="https://i.stack.imgur.com/ABOxZ.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/ABOxZ.png" alt="enter image description here"></a></p>		<p>and the body:</p>		<p><a href="https://i.stack.imgur.com/HTyUF.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/HTyUF.png" alt="enter image description here"></a></p>		<p>and the Device Explorer <strong>output</strong>:</p>		<p><a href="https://i.stack.imgur.com/uHRi1.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/uHRi1.png" alt="enter image description here"></a></p>		<p>and the blob Storage:</p>		<pre><code>{	  "EnqueuedTimeUtc": "2019-09-25T15:58:25.0900000Z",	  "Properties": {	  "abcd": "abcd1234"	},	  "SystemProperties": {	  "connectionDeviceId": "device2",	  "connectionAuthMethod": "{\"scope\":\"device\",\"type\":\"sas\",\"issuer\":\"iothub\",\"acceptingIpFilterRule\":null}",	  "connectionDeviceGenerationId": "636842109368955167",	  "contentType": "application/xml",	  "contentEncoding": "",	  "enqueuedTime": "2019-09-25T15:58:25.0900000Z"	},	"Body": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4gDQo8UGFyYUluZm8gPg0KICA8TmFtZT5Wb2x0YWdlPC9OYW1lPg0KICA8Q29kZT5VczwvQ29kZT4NCiAgPFVuaXQ+VjwvVW5pdCA+DQogIDxGcmVxPjQwPC9GcmVxID4NCiAgPFN0YXJ0PjA8L1N0YXJ0Pg0KICA8RW5kPjI4OS41PC9FbmQ+DQo8L1BhcmFJbmZvPg0K"	</code></pre>		<p>}</p>		<p>Note, that the body is a Base64 encoded xml text:</p>		<p><a href="https://i.stack.imgur.com/q7W8G.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/q7W8G.png" alt="enter image description here"></a></p>	"
58100801,102598032,58102568,3,0,Wed Sep 25 17:06:00 EDT 2019,2022284,"@roman_kiss  - does this method require adding anything to the header of the xml post?  My device does not allow that. It simply allows me to plug in the url of the https endpoint and set the frequency to push it. thats it."
58100801,102599106,58102568,3,0,Wed Sep 25 17:50:00 EDT 2019,8084828,"yes, only the *authorization header* is required to post the event to the Azure IoT Hub. If your device doesn't have the capability to handle this authorization header (or X.509 certificate), you should use either the Azure Function or API Management gateway https://azure.microsoft.com/en-us/services/api-management/ See also some policy examples how easy is to mediate a request https://docs.microsoft.com/en-us/azure/api-management/policy-samples"
58100801,102600989,58102568,3,0,Wed Sep 25 19:05:00 EDT 2019,1537195,"just to clarify: You do not need to modify anything on your content (the XML), but you do need to add a HTTP Header (authorization). Is that possible on your device?"
58100801,102605373,58102568,3,0,Wed Sep 25 22:43:00 EDT 2019,2022284,"@RomanKiss  nope. the  device only allows you to specify an http post url - with just the ability to add parameters to the url string."
58100801,102606326,58102568,3,0,Thu Sep 26 00:12:00 EDT 2019,8084828,"@user2022284, in this case, you should use an API Management service policy to mediate and forward the energy monitor POST request to the Azure IoT Hub."
