thread_ID, Id, ParentId, PostType, Score, CreationDate, OwnerID, Body
56238328,56238328,null,1,0,Tue May 21 12:29:00 EDT 2019,6448652,"<p>I'm trying to implement a security mechanism in RPL. For this, I need to log where did a packet come from. For example, if a packet is transmitted from A-->B-->C-->D, I want to find out at C that the packet came through B, and similarly for D.</p>		<p>I've added some code in <code>uip6.c</code> file to pull up the sender address from packetbuffer, but it is always null.</p>		<p>I'm storing the last node address and the time when the complete packet was received. These are the data structures.</p>		<pre class="lang-c prettyprint-override"><code>struct packet_time_entry {	  linkaddr_t *source;	  uint32_t time;	};	MEMB(packet_time_mem, struct packet_time_entry, 16);	LIST(packet_time);	</code></pre>		<p>The main code I've written so far is this, in <code>uip_process()</code>, below line 1108 (master branch).</p>		<pre class="lang-c prettyprint-override"><code>  struct packet_time_entry *p = memb_alloc(&amp;packet_time_mem);	  p-&gt;time = clock_time();	  linkaddr_copy(p-&gt;source, packetbuf_addr(PACKETBUF_ADDR_SENDER));		  struct packet_time_entry *i;	  for (i = list_head(packet_time); i != NULL; i = list_item_next(i)) {	    if (linkaddr_cmp(i-&gt;source, p-&gt;source))	      list_remove(packet_time, i);	  }	  list_add(packet_time, p);	  PRINTF("Entry ");	  PRINTLLADDR((uip_lladdr_t*) p-&gt;source);  // always NULL 	  PRINTF("| %lu", p-&gt;time);	  PRINTF("\n");	</code></pre>		<p>I expect it to give me the address from packetbuf, but it's always NULL. Also, I suspect it is run only at the destination node, but not at the intermediate nodes.</p>	"
56238328,99096710,56238328,3,0,Tue May 21 13:07:00 EDT 2019,6225913,"You just want to log the sender of each packet if I understood your question correctly ?"
56238328,99096786,56238328,3,0,Tue May 21 13:09:00 EDT 2019,6448652,"@desmaxi Yes, on a per-hop level"
56238328,99096913,56238328,3,0,Tue May 21 13:12:00 EDT 2019,6225913,"did you try to use the callback functions? when a packet is received either over (r)unicast / broadcast / multicast / ... the appropriate callback function is called with the sender of the packet, the packet, and the retransmission ."
56238328,99097009,56238328,3,0,Tue May 21 13:15:00 EDT 2019,6448652,"Can you point me towards any documentation for callback functions? I couldn't find much help online"
56238328,99097371,56238328,3,0,Tue May 21 13:25:00 EDT 2019,6225913,"When you initialize you udp connection you can pass a callback function, here is an example of rpl-udp with an udp-client, https://github.com/contiki-ng/contiki-ng/blob/develop/examples/rpl-udp/udp-client.c. It shows how to set the callback function for the udp connection."
56238328,99097581,56238328,3,0,Tue May 21 13:30:00 EDT 2019,6448652,"Thanks. I'll try to use callbacks."
56238328,56282284,56238328,2,0,Thu May 23 20:09:00 EDT 2019,5895576,"<p>You can DEBUG the execution. For that just set DEBUG_NONE TO DEBUG_PRINT in uip6.c and then parse the serial log for finding the path taken by the packet.</p>	"
